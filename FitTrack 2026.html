<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FitTrack 2026 - æ¸›è„‚æˆ°é¬¥ç´€éŒ„</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 1. React Core -->
    <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- 2. Dependencies for Recharts -->
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/react-is@18.2.0/umd/react-is.production.min.js"></script>

    <!-- 3. Recharts (Stable UMD Version) -->
    <script src="https://unpkg.com/recharts@2.12.3/umd/Recharts.js"></script>
    
    <!-- 4. Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .safe-area-pb { padding-bottom: env(safe-area-inset-bottom); }
        body { background-color: #f8fafc; -webkit-tap-highlight-color: transparent; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        input[type="date"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            filter: invert(0.5);
        }
        /* é¿å…æ‰‹æ©Ÿä¸Šè¼¸å…¥æ¡†å­—é«”éå°å°è‡´æ”¾å¤§ */
        input, select, textarea { font-size: 16px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const Recharts = window.Recharts || {};
        // åŠ å…¥ LineChart ä¿®å¾©è¡€å£“é é¢éŒ¯èª¤
        const { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Line, LineChart, ComposedChart, Bar, ReferenceLine } = Recharts;

        // --- å…§å»º SVG åœ–æ¨™å…ƒä»¶ ---
        const IconBase = ({ children, color = "currentColor", size = 24, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                {children}
            </svg>
        );

        const Dumbbell = (props) => <IconBase {...props}><path d="m6.5 6.5 11 11"/><path d="m21 21-1-1"/><path d="m3 3 1 1"/><path d="m18 22 4-4"/><path d="m2 6 4-4"/><path d="m3 10 7-7"/><path d="m14 21 7-7"/></IconBase>;
        const Scale = (props) => <IconBase {...props}><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></IconBase>;
        const TrendingDown = (props) => <IconBase {...props}><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></IconBase>;
        const Calendar = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>;
        const CheckCircle2 = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></IconBase>;
        const Circle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/></IconBase>;
        const Plus = (props) => <IconBase {...props}><path d="M5 12h14"/><path d="M12 5v14"/></IconBase>;
        const Save = (props) => <IconBase {...props}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconBase>;
        const LayoutDashboard = (props) => <IconBase {...props}><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></IconBase>;
        const History = (props) => <IconBase {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></IconBase>;
        const Settings = (props) => <IconBase {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconBase>;
        const Utensils = (props) => <IconBase {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></IconBase>;
        const Flame = (props) => <IconBase {...props}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.2.5-3Z"/></IconBase>;
        const Activity = (props) => <IconBase {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></IconBase>;
        const Timer = (props) => <IconBase {...props}><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></IconBase>;
        const Footprints = (props) => <IconBase {...props}><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 11 3.8 11 8c0 1.25-1 2-1 2.5 0 .83.67 1.5 1.5 1.5H12c.55 0 1 .45 1 1v2.38c0 2.12 1.03 3.12 1 5.62-.03 2.72-1.49 6-4.5 6C7.63 22 6 20.2 6 16c0-1.25 1-2 1-2.5 0-.83-.67-1.5-1.5-1.5H5c-.55 0-1-.45-1-1Z"/></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></IconBase>;
        const Zap = (props) => <IconBase {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconBase>;
        const Edit = (props) => <IconBase {...props}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></IconBase>;
        const RotateCcw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></IconBase>;
        const PlusCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="16"/><line x1="8" x2="16" y1="12" y2="12"/></IconBase>;
        const Search = (props) => <IconBase {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconBase>;
        const Sparkles = (props) => <IconBase {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></IconBase>;
        const HeartPulse = (props) => <IconBase {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="M12 5 9.04 15.2a1 1 0 0 0 .96 1.25h0a1 1 0 0 0 .96-.75L12 11l1.04 3.7a1 1 0 0 0 .96.75h0a1 1 0 0 0 .96-1.25L12 5Z"/></IconBase>;

        // --- å‹µå¿—èªéŒ„ (52å¥) ---
        const INSPIRATIONAL_QUOTES = [
            "ç¾…é¦¬ä¸æ˜¯ä¸€å¤©é€ æˆçš„ï¼Œå¥½èº«æä¹Ÿæ˜¯ã€‚", "æ±—æ°´æ˜¯è„‚è‚ªçš„çœ¼æ·šï¼Œåˆ¥è®“å®ƒåœä¸‹ä¾†ï¼", "è‡ªå¾‹æ˜¯é€šå¾€è‡ªç”±çš„å”¯ä¸€é“è·¯ã€‚", "æ˜¨å¤©çš„ä½ å·²ç¶“éå»ï¼Œä»Šå¤©çš„ä½ æ­£åœ¨è®Šå¼·ã€‚",
            "ä¸è¦ç­‰åˆ°æ˜å¤©ï¼Œå› ç‚ºæ˜å¤©æ°¸é ä¸æœƒä¾†ã€‚", "æ²’æœ‰å¥‡è¹Ÿï¼Œåªæœ‰ç´¯ç©ã€‚", "æ”¹è®Šå¾ˆç—›è‹¦ï¼Œä½†ä¸æ”¹è®Šæ›´ç—›è‹¦ã€‚", "ä½ æµä¸‹çš„æ¯ä¸€æ»´æ±—æ°´ï¼Œéƒ½æ˜¯ç‚ºäº†é‡è¦‹æ›´å¥½çš„è‡ªå·±ã€‚",
            "å …æŒä¸‹å»ï¼Œé›–ç„¶å¾ˆç´¯ï¼Œä½†å¾ˆå€¼å¾—ã€‚", "ç®¡ä½å˜´ï¼Œé‚é–‹è…¿ï¼Œæ˜å¤©ä½ æ˜¯å¤§é•·è…¿ã€‚", "å…¶å¯¦ä½ å¾ˆå¼·ï¼Œåªæ˜¯ä½ é‚„æ²’é€¼è‡ªå·±ä¸€æŠŠã€‚", "ç¾åœ¨çš„ç—›ï¼Œæ˜¯ç‚ºäº†æœªä¾†çš„çˆ½ã€‚",
            "ä¸è¦å‡è£åŠªåŠ›ï¼Œçµæœä¸æœƒé™ªä½ æ¼”æˆ²ã€‚", "æƒ³æ”¾æ£„çš„æ™‚å€™ï¼Œæƒ³æƒ³ç•¶åˆç‚ºä»€éº¼é–‹å§‹ã€‚", "æ¯å¤©é€²æ­¥ä¸€é»é»ï¼Œä¸€å¹´å¾Œå°±æ˜¯å·¨å¤§çš„æ”¹è®Šã€‚", "èº«ææ˜¯æœ€å¥½çš„åç‰Œã€‚",
            "é€£é«”é‡éƒ½æ§åˆ¶ä¸äº†ï¼Œä½•ä»¥æ§åˆ¶äººç”Ÿï¼Ÿ", "å°‡ä¾†çš„ä½ ï¼Œæœƒæ„Ÿè¬ç¾åœ¨æ‹¼å‘½çš„è‡ªå·±ã€‚", "åªæœ‰å›ä¸å»ï¼Œæ²’æœ‰éä¸å»ã€‚", "ä¸ç˜¦ä¸‹ä¾†ï¼Œä½ æ°¸é ä¸çŸ¥é“è‡ªå·±æœ‰å¤šç¾ã€‚",
            "èˆ‡å…¶ç¾¨æ…•åˆ¥äººï¼Œä¸å¦‚è‡ªå·±æˆç‚ºé‚£å€‹äººã€‚", "æˆåŠŸçš„è·¯ä¸Šä¸¦ä¸æ“æ“ ï¼Œå› ç‚ºå …æŒçš„äººä¸å¤šã€‚", "è‡‰è›‹æ˜¯å¤©ç”Ÿçš„ï¼Œèº«ææ˜¯è‡ªå·±çµ¦çš„ã€‚", "é€™ä¸€åˆ»ä¸å …æŒï¼Œä¸‹ä¸€åˆ»å°±æœƒå¾Œæ‚”ã€‚",
            "æ—¢ç„¶é–‹å§‹äº†ï¼Œå°±åˆ¥è¼•æ˜“çµæŸã€‚", "åˆ¥è®“ä½ çš„å˜´ï¼Œæ¯€äº†ä½ çš„èº«ã€‚", "åªæœ‰æ±—æ°´ä¸æœƒèƒŒå›ä½ ã€‚", "ç˜¦ä¸‹ä¾†ï¼Œä¸–ç•Œéƒ½æ˜¯ä½ çš„ã€‚",
            "ä»Šå¤©çš„æ±—æ°´ï¼Œæ˜¯æ˜å¤©çš„ç·šæ¢ã€‚", "ç‚ºäº†ç©¿ä¸Šé‚£ä»¶å–œæ­¡çš„è¡£æœï¼Œæ‹¼äº†ï¼", "é¤“äº†å°±å»ç…§ç…§é¡å­ï¼Œé‚£è£¡æœ‰ç­”æ¡ˆã€‚", "å¿ä½å˜´ï¼Œé‚é–‹è…¿ï¼Œå¥‡è¹Ÿæœƒç™¼ç”Ÿã€‚",
            "ç›¸ä¿¡è‡ªå·±ï¼Œä½ æ¯”æƒ³åƒä¸­æ›´å¼·å¤§ã€‚", "åˆ¥åœ¨æœ€è©²å¥®é¬¥çš„å¹´ç´€é¸æ“‡å®‰é€¸ã€‚", "ä½ çš„èº«æåæ˜ äº†ä½ çš„ç”Ÿæ´»æ…‹åº¦ã€‚", "é‹å‹•æ˜¯ä¸–ç•Œä¸Šæœ€æ£’çš„æŠ—è€ä¿é¤Šå“ã€‚",
            "è®“é‹å‹•æˆç‚ºä¸€ç¨®ç¿’æ…£ï¼Œå°±åƒå‘¼å¸ä¸€æ¨£ã€‚", "åªè¦è·¯æ˜¯å°çš„ï¼Œå°±ä¸æ€•è·¯é ã€‚", "ä½ çš„èº«é«”æ˜¯ä½ æœ€å¿ å¯¦çš„å¤¥ä¼´ï¼Œå–„å¾…å®ƒã€‚", "ä¸è¦å› ç‚ºä¸€æ¬¡å¤±æ•—å°±æ”¾æ£„æ•´å€‹æ—…ç¨‹ã€‚",
            "æ¯ä¸€æ¬¡çš„åŠ›ç«­ï¼Œéƒ½æ˜¯é‡ç”Ÿçš„é–‹å§‹ã€‚", "ä½ æµçš„æ¯ä¸€æ»´æ±—ï¼Œéƒ½åœ¨é›•åˆ»ä½ çš„æœªä¾†ã€‚", "ä¸æ˜¯å› ç‚ºçœ‹åˆ°å¸Œæœ›æ‰å …æŒï¼Œæ˜¯å› ç‚ºå …æŒæ‰çœ‹åˆ°å¸Œæœ›ã€‚", "è‡ªå¾‹çš„äººï¼Œé€£è€å¤©çˆºéƒ½ä¸æ•¢è¾œè² ã€‚",
            "æŠŠé‹å‹•ç•¶æˆåƒé£¯ç¡è¦ºä¸€æ¨£è‡ªç„¶ã€‚", "ç¾åœ¨çš„æ¯ä¸€æ¬¡æ·±è¹²ï¼Œéƒ½æ˜¯ç‚ºäº†è€äº†èƒ½è¹²è‘—ä¸Šå»æ‰€ã€‚", "ä½ çš„æ½›åŠ›è¶…ä¹ä½ çš„æƒ³åƒã€‚", "ç”¨æ±—æ°´æ¾†çŒå¤¢æƒ³ï¼Œç”¨å …æŒæ”¶ç©«å¸Œæœ›ã€‚",
            "ä¸è¦å°çœ‹æ¯å¤©çš„å¾®å°ç©ç´¯ã€‚", "æœ€å¥½çš„æ•´å®¹æ˜¯æ¸›è‚¥ï¼Œæœ€å¥½çš„ä¿é¤Šæ˜¯é‹å‹•ã€‚", "ä½ å¿…é ˆéå¸¸åŠªåŠ›ï¼Œæ‰èƒ½çœ‹èµ·ä¾†æ¯«ä¸è²»åŠ›ã€‚", "é€™ä¸€å¹´ï¼Œçµ¦è‡ªå·±ä¸€å€‹äº¤ä»£ã€‚"
        ];

        // --- å¸¸è¦‹é£Ÿç‰©è³‡æ–™åº« (å®Œæ•´æ“´å……ç‰ˆ) ---
        const COMMON_FOODS = [
            { category: 'æ—©é¤æ¨è–¦', items: [
                { name: 'é®ªé­šè›‹é¤…', cal: 350, pro: 12 },
                { name: 'ç‰ç±³è›‹é¤…', cal: 300, pro: 8 },
                { name: 'åŸå‘³è›‹é¤…', cal: 260, pro: 7 },
                { name: 'èµ·å¸è›‹é¤…', cal: 320, pro: 10 },
                { name: 'è±¬æ’è›‹åå¸', cal: 400, pro: 18 },
                { name: 'ç«è…¿è›‹åå¸', cal: 350, pro: 12 },
                { name: 'åŸ¹æ ¹è›‹åå¸', cal: 380, pro: 14 },
                { name: 'å¡æ‹‰é›è…¿å ¡', cal: 650, pro: 20 },
                { name: 'éµæ¿éºµ (é»‘èƒ¡æ¤’/è˜‘è‡)', cal: 450, pro: 10 },
                { name: 'è˜¿è””ç³• (3ç‰‡)', cal: 300, pro: 5 },
                { name: 'è·åŒ…è›‹ (1é¡†)', cal: 120, pro: 7 },
                { name: 'è”¥æŠ“é¤… (åŸå‘³)', cal: 400, pro: 8 },
                { name: 'è”¥ç‡’åŒ… (1é¡†)', cal: 300, pro: 8 },
                { name: 'é£¯ç³° (ç´«ç±³/å‚³çµ±)', cal: 500, pro: 10 },
                { name: 'ç‡’é¤…æ²¹æ¢', cal: 550, pro: 8 },
                { name: 'è±†æ¼¿ (æœ‰ç³– 400ml)', cal: 240, pro: 14 },
                { name: 'ç„¡ç³–è±†æ¼¿ (400ml)', cal: 135, pro: 14 },
                { name: 'ç±³æ¼¿ (400ml)', cal: 250, pro: 3 },
            ]},
            { category: 'å„å¼ç‚’é£¯/ç‡´é£¯', items: [
                { name: 'è›‹ç‚’é£¯ (1ä»½)', cal: 600, pro: 12 },
                { name: 'è‚‰çµ²ç‚’é£¯ (1ä»½)', cal: 700, pro: 18 },
                { name: 'è¦ä»ç‚’é£¯ (1ä»½)', cal: 650, pro: 20 },
                { name: 'ç‰›è‚‰ç‚’é£¯ (1ä»½)', cal: 750, pro: 22 },
                { name: 'ç¾Šè‚‰ç‚’é£¯ (1ä»½)', cal: 750, pro: 22 },
                { name: 'é®­é­šç‚’é£¯ (1ä»½)', cal: 700, pro: 20 },
                { name: 'é¦™è…¸ç‚’é£¯ (1ä»½)', cal: 800, pro: 15 },
                { name: 'é¹¹é­šé›ç²’ç‚’é£¯ (1ä»½)', cal: 750, pro: 25 },
                { name: 'æšå·ç‚’é£¯ (1ä»½)', cal: 700, pro: 18 },
                { name: 'æ³¡èœç‚’é£¯ (1ä»½)', cal: 600, pro: 12 },
                { name: 'èŒ„æ±è›‹ç‚’é£¯ (1ä»½)', cal: 600, pro: 12 },
                { name: 'é³³æ¢¨ç‚’é£¯ (1ä»½)', cal: 650, pro: 12 },
                { name: 'æ²™èŒ¶ç‰›è‚‰ç‡´é£¯ (1ä»½)', cal: 800, pro: 25 },
                { name: 'æ»‘è›‹è¦ä»ç‡´é£¯ (1ä»½)', cal: 750, pro: 20 },
            ]},
            { category: 'æ­£é¤ (ä¾¿ç•¶/éºµé£Ÿ)', items: [
                { name: 'é›è‚‰é£¯ä¾¿ç•¶', cal: 700, pro: 25 },
                { name: 'æ»·é›è…¿ä¾¿ç•¶', cal: 800, pro: 28 },
                { name: 'ç‚¸é›è…¿ä¾¿ç•¶', cal: 950, pro: 28 },
                { name: 'æ’éª¨ä¾¿ç•¶ (ç‚¸)', cal: 900, pro: 25 },
                { name: 'æ’éª¨ä¾¿ç•¶ (æ»·)', cal: 800, pro: 25 },
                { name: 'æ§è‚‰ä¾¿ç•¶', cal: 900, pro: 20 },
                { name: 'ä¸‰å¯¶é£¯', cal: 950, pro: 30 },
                { name: 'ç‰›è‚‰éºµ (ç´…ç‡’)', cal: 800, pro: 30 },
                { name: 'ç‰›è‚‰éºµ (æ¸…ç‡‰)', cal: 600, pro: 30 },
                { name: 'é™½æ˜¥éºµ (ä¹¾)', cal: 400, pro: 8 },
                { name: 'éº»é†¬éºµ', cal: 550, pro: 10 },
                { name: 'ç‚¸é†¬éºµ', cal: 650, pro: 15 },
                { name: 'æ°´é¤ƒ (10é¡†)', cal: 500, pro: 20 },
                { name: 'é‹è²¼ (10é¡†)', cal: 750, pro: 20 },
                { name: 'ç‚’é£¯ (è‚‰çµ²)', cal: 700, pro: 15 },
                { name: 'å’–å“©é›è‚‰é£¯', cal: 750, pro: 20 },
            ]},
            { category: 'æ¹¯å“/ç¾¹æ¹¯', items: [
                { name: 'è²¢ä¸¸æ¹¯', cal: 150, pro: 8 },
                { name: 'é¤›é£©æ¹¯', cal: 250, pro: 10 },
                { name: 'ç´«èœè›‹èŠ±æ¹¯', cal: 80, pro: 6 },
                { name: 'é…¸è¾£æ¹¯', cal: 150, pro: 6 },
                { name: 'ç‰ç±³æ¿ƒæ¹¯', cal: 200, pro: 5 },
                { name: 'è›¤èœŠæ¹¯', cal: 60, pro: 8 },
                { name: 'è±¬è¡€æ¹¯', cal: 120, pro: 10 },
                { name: 'é­šä¸¸æ¹¯', cal: 100, pro: 8 },
                { name: 'å‘³å™Œæ¹¯', cal: 60, pro: 4 },
                { name: 'é­·é­šç¾¹æ¹¯', cal: 350, pro: 15 },
                { name: 'è‚‰ç¾¹æ¹¯', cal: 380, pro: 12 },
            ]},
            { category: 'å†¬ä»¤é€²è£œ/é‹ç‰©', items: [
                { name: 'ç¾Šè‚‰çˆ (1äººä»½)', cal: 800, pro: 40 },
                { name: 'è–‘æ¯é´¨ (1äººä»½)', cal: 900, pro: 35 },
                { name: 'éº»æ²¹é› (1ç¢—)', cal: 450, pro: 25 },
                { name: 'è—¥ç‡‰æ’éª¨ (1ç¢—)', cal: 500, pro: 30 },
                { name: 'è‡­è‡­é‹ (1é‹)', cal: 800, pro: 30 },
                { name: 'æµ·é®®è±†è…é‹ (1é‹)', cal: 600, pro: 35 },
                { name: 'éº»è¾£é‹ (1äººä»½)', cal: 1200, pro: 40 },
                { name: 'å£½å–œç‡’ (1äººä»½)', cal: 1000, pro: 40 },
            ]},
            { category: 'è‡ªåŠ©é¤/ä¾¿ç•¶èœ (1ä»½/åŒ™)', items: [
                { name: 'ç‚¸æ’éª¨ (1ç‰‡)', cal: 400, pro: 20 },
                { name: 'æ»·æ’éª¨ (1ç‰‡)', cal: 300, pro: 20 },
                { name: 'æ§è‚‰ (1å¡Š)', cal: 350, pro: 15 },
                { name: 'æ»·é›è…¿ (1æ”¯)', cal: 300, pro: 25 },
                { name: 'ç‚¸é›è…¿ (1æ”¯)', cal: 500, pro: 25 },
                { name: 'æ¸…è’¸é­š (1ç‰‡)', cal: 120, pro: 18 },
                { name: 'ç…é­š (1ç‰‡)', cal: 200, pro: 18 },
                { name: 'ç‚¸é­šæ’ (1ç‰‡)', cal: 280, pro: 15 },
                { name: 'è”¥çˆ†ç‰›è‚‰ (1ä»½)', cal: 250, pro: 15 },
                { name: 'ç³–é†‹é‡Œè‚Œ (1ä»½)', cal: 300, pro: 12 },
                { name: 'ä¸‰æ¯é› (1ä»½)', cal: 250, pro: 18 },
                { name: 'ç•ªèŒ„ç‚’è›‹ (1ä»½)', cal: 150, pro: 8 },
                { name: 'éº»å©†è±†è… (1ä»½)', cal: 220, pro: 10 },
                { name: 'ç‚’é«˜éº—èœ (1ä»½)', cal: 80, pro: 2 },
                { name: 'ç‚’è èœ (1ä»½)', cal: 80, pro: 2 },
                { name: 'æ»·è›‹ (1é¡†)', cal: 75, pro: 7 },
                { name: 'ç™½é£¯ (1ç¢—)', cal: 280, pro: 6 },
            ]},
            { category: 'éº¥ç•¶å‹/é€Ÿé£Ÿ', items: [
                { name: 'å¤§éº¥å…‹', cal: 530, pro: 24 },
                { name: 'é›™å±¤ç‰›è‚‰å‰äº‹å ¡', cal: 450, pro: 25 },
                { name: 'éº¥é¦™é·„', cal: 360, pro: 15 },
                { name: 'éº¥é¦™é­š', cal: 330, pro: 15 },
                { name: 'å‹è¾£é·„è…¿å ¡', cal: 490, pro: 20 },
                { name: 'éº¥å…‹é›å¡Š (6å¡Š)', cal: 280, pro: 15 },
                { name: 'éº¥å…‹é›å¡Š (10å¡Š)', cal: 460, pro: 26 },
                { name: 'è–¯æ¢ (ä¸­)', cal: 380, pro: 4 },
                { name: 'è–¯æ¢ (å¤§)', cal: 530, pro: 6 },
                { name: 'è±¬è‚‰æ»¿ç¦å ¡åŠ è›‹', cal: 380, pro: 20 },
                { name: 'è–¯é¤…', cal: 150, pro: 1 },
                { name: 'è›‹æ²å†°æ·‡æ·‹', cal: 145, pro: 3 },
                { name: 'ç‰ç±³æ¹¯ (å°)', cal: 90, pro: 2 },
                { name: 'è‚¯å¾·åŸºå’”å•¦è„†é› (1å¡Š)', cal: 236, pro: 16 },
                { name: 'è‚¯å¾·åŸºè›‹å¡” (1é¡†)', cal: 182, pro: 2 },
                { name: 'æ‘©æ–¯æ¼¢å ¡ (åŸå‘³)', cal: 400, pro: 15 },
                { name: 'æ½›è‰‡å ¡ (6å‹ç«é›èƒ¸)', cal: 350, pro: 20 },
            ]},
            { category: 'ç‡’çƒ¤/ä¸²ç‡’/å¤œå¸‚', items: [
                { name: 'çƒ¤é¦™è…¸ (1æ ¹)', cal: 280, pro: 10 },
                { name: 'å¤§è…¸(ç±³è…¸) (1æ ¹)', cal: 250, pro: 4 },
                { name: 'å¤§è…¸åŒ…å°è…¸ (1çµ„)', cal: 550, pro: 15 },
                { name: 'ç‚­çƒ¤é›æ’ (1ä»½)', cal: 550, pro: 35 },
                { name: 'çƒ¤è‚‰ä¸² (è±¬/ç‰›/é› 1ä¸²)', cal: 150, pro: 10 },
                { name: 'çƒ¤é›å±è‚¡ (1ä¸²)', cal: 250, pro: 8 },
                { name: 'çƒ¤é›çš® (1ä¸²)', cal: 200, pro: 5 },
                { name: 'çƒ¤ç”œä¸è¾£ (1ä¸²)', cal: 150, pro: 5 },
                { name: 'çƒ¤è±¬è¡€ç³• (1æ”¯)', cal: 200, pro: 6 },
                { name: 'çƒ¤ç™¾é è±†è… (1ä¸²)', cal: 180, pro: 10 },
                { name: 'çƒ¤è±†å¹² (1ä¸²)', cal: 120, pro: 12 },
                { name: 'çƒ¤ç‰ç±³ (1æ”¯)', cal: 300, pro: 5 },
                { name: 'çƒ¤é’æ¤’/é¦™è‡ (1ä¸²)', cal: 60, pro: 2 },
                { name: 'çƒ¤é­·é­š (1éš»)', cal: 300, pro: 40 },
                { name: 'åå¸å¤¾è‚‰ (1ä»½)', cal: 350, pro: 15 },
            ]},
             { category: 'æŠ«è–©/ç‚¸é›/é€Ÿé£Ÿ', items: [
                { name: 'å¤å¨å¤·æŠ«è–© (1ç‰‡)', cal: 220, pro: 10 },
                { name: 'ç¸½åŒ¯æŠ«è–© (1ç‰‡)', cal: 300, pro: 12 },
                { name: 'æµ·é®®æŠ«è–© (1ç‰‡)', cal: 240, pro: 11 },
                { name: 'ç¾å¼è‡˜è…¸æŠ«è–© (1ç‰‡)', cal: 280, pro: 10 },
                { name: 'èŠå¿ƒæŠ«è–© (1ç‰‡)', cal: 350, pro: 12 },
                { name: 'æ‹¿å¡é‡Œç‚¸é› (1å¡Š)', cal: 300, pro: 18 },
                { name: 'èƒ–è€çˆ¹ç‚¸é› (1å¡Š)', cal: 320, pro: 18 },
                { name: 'éŸ“å¼ç‚¸é› (1äººä»½)', cal: 600, pro: 25 },
            ]},
            { category: 'æ¶ˆå¤œ/ç‚¸ç‰©/å°åƒ', items: [
                { name: 'é¹½é…¥é› (1ä»½)', cal: 500, pro: 30 },
                { name: 'ç‚¸é›æ’ (1ç‰‡)', cal: 650, pro: 40 },
                { name: 'ç‚¸é­·é­š (1ä»½)', cal: 350, pro: 25 },
                { name: 'ç‚¸å››å­£è±† (1ä»½)', cal: 180, pro: 2 },
                { name: 'ç‚¸éŠ€çµ²å· (1æ¢)', cal: 300, pro: 5 },
                { name: 'ç”œä¸è¾£ (1ä»½)', cal: 300, pro: 5 },
                { name: 'ç±³è¡€ç³• (1æ”¯)', cal: 300, pro: 5 },
                { name: 'åœ°ç“œçƒ (1ä»½)', cal: 400, pro: 2 },
                { name: 'èšµä»”ç…', cal: 500, pro: 15 },
                { name: 'ç« é­šç‡’ (1ç›’ 6é¡†)', cal: 350, pro: 12 },
                { name: 'å¤§è…¸åŒ…å°è…¸', cal: 550, pro: 15 },
                { name: 'æ»·å‘³æ‹¼ç›¤ (1äººä»½)', cal: 400, pro: 25 },
                { name: 'æ³¡éºµ (ç‚¸é†¬éºµ)', cal: 500, pro: 8 },
                { name: 'æ³¡éºµ (çµ±ä¸€è‚‰ç‡¥)', cal: 400, pro: 7 },
                { name: 'è¶…å•†éœœæ·‡æ·‹ (1æ”¯)', cal: 200, pro: 4 },
            ]},
             { category: 'é£²æ–™/æ‰‹æ–/å’–å•¡', items: [
                { name: 'çç å¥¶èŒ¶ (700ml)', cal: 650, pro: 2 },
                { name: 'ç´…èŒ¶æ‹¿éµ/é®®å¥¶èŒ¶', cal: 250, pro: 6 },
                { name: 'ç´”èŒ¶é¡ (ç„¡ç³–)', cal: 0, pro: 0 },
                { name: 'å¤šå¤šç¶ èŒ¶', cal: 350, pro: 2 },
                { name: 'æ°´æœèŒ¶', cal: 300, pro: 0 },
                { name: 'çƒé¾å¥¶èŒ¶', cal: 300, pro: 2 },
                { name: 'é»‘ç³–çç é®®å¥¶ (500ml)', cal: 550, pro: 5 },
                { name: 'èŠ‹é ­é®®å¥¶ (500ml)', cal: 350, pro: 6 },
                { name: 'ä»™è‰å‡å¥¶èŒ¶ (700ml)', cal: 450, pro: 3 },
                { name: 'å¸ƒä¸å¥¶èŒ¶ (700ml)', cal: 500, pro: 6 },
                { name: 'å¥¶è“‹ç¶ èŒ¶ (700ml)', cal: 400, pro: 2 },
                { name: 'ç¿¡ç¿ æª¸æª¬ (700ml)', cal: 300, pro: 0 },
                { name: 'ç”˜è”—é’èŒ¶ (700ml)', cal: 180, pro: 0 },
                { name: 'èœ‚èœœæª¸æª¬ (700ml)', cal: 300, pro: 0 },
                { name: 'æ¥Šæç”˜éœ² (500ml)', cal: 450, pro: 3 },
                { name: 'æŠ¹èŒ¶æ‹¿éµ (500ml)', cal: 250, pro: 6 },
                { name: 'æ‹¿éµå’–å•¡ (ä¸­)', cal: 120, pro: 5 },
                { name: 'ç¾å¼å’–å•¡', cal: 10, pro: 0 },
                { name: 'ç„¦ç³–ç‘ªå¥‡æœµ (ä¸­)', cal: 200, pro: 5 },
                { name: 'ç‡•éº¥æ‹¿éµ (ä¸­)', cal: 150, pro: 2 },
                { name: 'å¯æ¨‚ (330ml)', cal: 140, pro: 0 },
                { name: 'é‹å‹•é£²æ–™ (600ml)', cal: 160, pro: 0 },
                { name: 'è±†æ¼¿ (æœ‰ç³– 400ml)', cal: 240, pro: 14 },
                { name: 'ç±³æ¼¿ (400ml)', cal: 250, pro: 3 },
                { name: 'å…¨è„‚é®®å¥¶ (290ml)', cal: 190, pro: 9 },
                { name: 'ç‡•éº¥å¥¶ (300ml)', cal: 150, pro: 3 },
                { name: 'æŸ³æ©™æ± (100% 300ml)', cal: 140, pro: 2 },
                { name: 'å·§å…‹åŠ›ç‰›å¥¶ (290ml)', cal: 200, pro: 8 },
                { name: 'å°ç£å•¤é…’ (330ml)', cal: 140, pro: 1 },
            ]},
             { category: 'è¶…å•†/é—œæ±ç…®', items: [
                { name: 'ç™½è˜¿è”” (1å¡Š)', cal: 15, pro: 0.5 },
                { name: 'ç±³è¡€ç³• (1æ”¯)', cal: 130, pro: 4 },
                { name: 'é»‘è¼ª (1æ”¯)', cal: 90, pro: 4 },
                { name: 'è²¢ä¸¸ (1é¡†)', cal: 50, pro: 3 },
                { name: 'é­šè±†è… (1å¡Š)', cal: 80, pro: 6 },
                { name: 'é»ƒé‡‘é­šè›‹ (1ä¸²)', cal: 50, pro: 5 },
                { name: 'èŒ­ç™½ç­ (1æ”¯)', cal: 20, pro: 1 },
                { name: 'é«˜éº—èœæ² (1å€‹)', cal: 70, pro: 4 },
                { name: 'ç‰ç±³ (1å¡Š)', cal: 70, pro: 2 },
                { name: 'è‹¦ç“œå° (1å€‹)', cal: 40, pro: 3 },
                { name: 'æé®‘è‡ (1å€‹)', cal: 10, pro: 1 },
                { name: 'é¦™è‡ (1æœµ)', cal: 10, pro: 1 },
                { name: 'å¨ƒå¨ƒèœ (1ä»½)', cal: 15, pro: 1 },
                { name: 'é¾è¦æ²™æ‹‰çƒ (1é¡†)', cal: 50, pro: 2 },
                { name: 'é­šåµå· (1æ¢)', cal: 40, pro: 3 },
                { name: 'æ²¹è±†è… (1å¡Š)', cal: 40, pro: 3 },
                { name: 'é±ˆé­šä¸¸ (1é¡†)', cal: 45, pro: 3 },
                { name: 'èŠ±æä¸¸ (1é¡†)', cal: 50, pro: 4 },
                { name: 'è™±ç›®é­šä¸¸ (1é¡†)', cal: 45, pro: 4 },
                { name: 'ç«¹è¼ª (1æ”¯)', cal: 35, pro: 3 },
                { name: 'è±¬è¡€ (1å¡Š)', cal: 15, pro: 3 },
                { name: 'è’Ÿè’»çµ² (1æ²)', cal: 5, pro: 0 },
                { name: 'é—œæ±ç…®æ¹¯ (1ç¢—)', cal: 30, pro: 1 },
                { name: 'ç§‘å­¸éºµ (1åŒ…)', cal: 195, pro: 4 },
                { name: 'æ˜¥é›¨/å†¬ç²‰ (1ä»½)', cal: 140, pro: 0 },
                { name: 'ç‹å­éºµ (1åŒ…)', cal: 220, pro: 5 },
            ]},
             { category: 'è¶…å•†/æ¸›è„‚é›è‚‰', items: [
                { name: 'åŸå‘³é›èƒ¸è‚‰ (1åŒ…)', cal: 120, pro: 23 },
                { name: 'è’œå‘³/é»‘èƒ¡æ¤’é›èƒ¸ (1åŒ…)', cal: 130, pro: 23 },
                { name: 'éº»è¾£é›èƒ¸è‚‰ (1åŒ…)', cal: 140, pro: 22 },
                { name: 'èˆ’è‚¥é›èƒ¸è‚‰ (1åŒ…)', cal: 120, pro: 24 },
                { name: 'é¹½æ°´é›èƒ¸è‚‰ (1åŒ…)', cal: 115, pro: 23 },
                { name: 'ç´å¥§è‰¯é¢¨å‘³é›èƒ¸ (1åŒ…)', cal: 135, pro: 22 },
                { name: 'é›èƒ¸è‚‰æ²™æ‹‰ (1ä»½)', cal: 180, pro: 15 },
                { name: 'èŒ¶è‘‰è›‹ (1é¡†)', cal: 75, pro: 7 },
            ]},
            { category: 'ç‰›æ’/éµæ¿ç‡’', items: [
                { name: 'æ²™æœ—ç‰›æ’ (ä¸»é¤ 8oz)', cal: 500, pro: 40 },
                { name: 'è²åŠ›ç‰›æ’ (ä¸»é¤ 6oz)', cal: 300, pro: 35 },
                { name: 'é›è…¿æ’ (å¸¶çš®/ä¸»é¤)', cal: 450, pro: 30 },
                { name: 'åšåˆ‡è±¬æ’ (ä¸»é¤)', cal: 450, pro: 35 },
                { name: 'éµæ¿éºµ (å«é†¬)', cal: 350, pro: 8 },
                { name: 'è·åŒ…è›‹ (ç…)', cal: 120, pro: 7 },
                { name: 'é…¥çš®æ¿ƒæ¹¯ (1ç¢—)', cal: 450, pro: 8 },
                { name: 'ç‰ç±³æ¿ƒæ¹¯ (1ç¢—)', cal: 150, pro: 4 },
                { name: 'é¤åŒ… (1å€‹)', cal: 100, pro: 2 },
                { name: 'ç´…èŒ¶ (1æ¯)', cal: 100, pro: 0 },
            ]},
             { category: 'ç«é‹åº—/å–®é»é£Ÿæ', items: [
                { name: 'ç‰›äº”èŠ±è‚‰ç›¤ (150g)', cal: 500, pro: 20 },
                { name: 'ä½è„‚æ¿è…±ç‰› (150g)', cal: 250, pro: 30 },
                { name: 'æ¢…èŠ±è±¬è‚‰ç›¤ (150g)', cal: 450, pro: 25 },
                { name: 'è±¬äº”èŠ±è‚‰ç›¤ (150g)', cal: 600, pro: 20 },
                { name: 'ç¾Šè‚‰ç‰‡ (150g)', cal: 400, pro: 25 },
                { name: 'é›è…¿è‚‰å¡Š (150g)', cal: 250, pro: 28 },
                { name: 'æµ·é®®æ‹¼ç›¤ (1ä»½)', cal: 300, pro: 40 },
                { name: 'è›¤èœŠ (1ç›¤)', cal: 60, pro: 10 },
                { name: 'è›‹é¤ƒ (1å€‹)', cal: 25, pro: 2 },
                { name: 'é­šé¤ƒ (1å€‹)', cal: 25, pro: 2 },
                { name: 'ç‡•é¤ƒ (1å€‹)', cal: 30, pro: 2 },
                { name: 'ç‚¸è±†çš® (1å€‹)', cal: 60, pro: 4 },
                { name: 'ç”Ÿè±†çš® (1ç‰‡)', cal: 30, pro: 4 },
                { name: 'å‡è±†è… (1å¡Š)', cal: 20, pro: 2 },
                { name: 'è€æ²¹æ¢ (1æ®µ)', cal: 50, pro: 1 },
                { name: 'éº»è¾£é‹æ¹¯åº• (1ç¢—)', cal: 200, pro: 5 },
                { name: 'æ˜†å¸ƒ/è”¬èœæ¹¯åº• (1ç¢—)', cal: 10, pro: 0 },
                { name: 'æ²™èŒ¶é†¬ (1åŒ™)', cal: 110, pro: 1 },
            ]},
            { category: 'å¥åº·/è‡ªç…® (æ¯100g)', items: [
                { name: 'ç™½é£¯ (1ç¢— 160g)', cal: 280, pro: 6 },
                { name: 'ç³™ç±³é£¯ (1ç¢— 160g)', cal: 232, pro: 5 },
                { name: 'æ°´ç…®ç‰ç±³ (1æ ¹)', cal: 140, pro: 4 },
                { name: 'åœ°ç“œ (ä¸­ 150g)', cal: 165, pro: 2 },
                { name: 'é›èƒ¸è‚‰ (100g)', cal: 110, pro: 23 },
                { name: 'é›è…¿è‚‰ (å»çš® 100g)', cal: 160, pro: 20 },
                { name: 'ç‰›è…± (100g)', cal: 140, pro: 20 },
                { name: 'ç…é®­é­š (100g)', cal: 200, pro: 20 },
                { name: 'å°ç£é¯› (100g)', cal: 100, pro: 20 },
                { name: 'æ°´ç…®è›‹ (1é¡†)', cal: 70, pro: 7 },
                { name: 'æ¿è±†è… (åŠç›’)', cal: 130, pro: 12 },
                { name: 'é«˜è›‹ç™½ç²‰ (1ä»½)', cal: 120, pro: 25 },
                { name: 'ç‡™é’èœ (1ä»½)', cal: 40, pro: 2 },
                { name: 'è˜‹æœ (1é¡†)', cal: 60, pro: 0 },
                { name: 'é¦™è•‰ (1æ ¹)', cal: 90, pro: 1 },
                { name: 'å¥‡ç•°æœ (1é¡†)', cal: 45, pro: 1 },
            ]},
            { category: 'è¶…å•†/å …æœ (1åŒ…/ä»½)', items: [
                { name: 'ç¶œåˆå …æœ (å°åŒ… 30g)', cal: 180, pro: 5 },
                { name: 'æä»æœ (30g)', cal: 170, pro: 6 },
                { name: 'è…°æœ (30g)', cal: 165, pro: 5 },
                { name: 'æ ¸æ¡ƒ (30g)', cal: 190, pro: 4 },
                { name: 'é»‘å·§å…‹åŠ› (1ç‰‡)', cal: 50, pro: 1 },
            ]}
        ];

        const DEFAULT_WORKOUTS = [
            {
                id: 'push',
                type: 'strength',
                name: 'æ¨ (èƒ¸/è‚©/ä¸‰é ­)',
                exercises: [
                    { name: 'æ§“éˆ´è‡¥æ¨', defaultSets: 4, defaultReps: '8-12', calFactor: 8 },
                    { name: 'ä¸Šæ–œå•éˆ´è‡¥æ¨', defaultSets: 3, defaultReps: '10-12', calFactor: 8 },
                    { name: 'å•éˆ´è‚©æ¨', defaultSets: 4, defaultReps: '10-12', calFactor: 8 },
                    { name: 'ä¸‰é ­è‚Œæ»‘è¼ªä¸‹å£“', defaultSets: 3, defaultReps: '12-15', calFactor: 8 },
                    { name: 'å•éˆ´å´å¹³èˆ‰', defaultSets: 4, defaultReps: '15-20', calFactor: 8 },
                ]
            },
            {
                id: 'pull',
                type: 'strength',
                name: 'æ‹‰ (èƒŒ/äºŒé ­/å¾Œè‚©)',
                exercises: [
                    { name: 'å¼•é«”å‘ä¸Š/æ»‘è¼ªä¸‹æ‹‰', defaultSets: 4, defaultReps: '8-12', calFactor: 8 },
                    { name: 'æ§“éˆ´åˆ’èˆ¹', defaultSets: 4, defaultReps: '8-12', calFactor: 8 },
                    { name: 'è‡‰æ‹‰ (Face Pull)', defaultSets: 3, defaultReps: '15-20', calFactor: 8 },
                    { name: 'æ§“éˆ´äºŒé ­å½èˆ‰', defaultSets: 3, defaultReps: '10-12', calFactor: 8 },
                    { name: 'å–®è‡‚å•éˆ´åˆ’èˆ¹', defaultSets: 3, defaultReps: '10-12', calFactor: 8 },
                ]
            },
            {
                id: 'legs',
                type: 'strength',
                name: 'è…¿ (è‚¡å››é ­/è…¿å¾Œ)',
                exercises: [
                    { name: 'æ§“éˆ´æ·±è¹²', defaultSets: 4, defaultReps: '6-10', calFactor: 8 },
                    { name: 'ç¾…é¦¬å°¼äºç¡¬èˆ‰', defaultSets: 4, defaultReps: '8-12', calFactor: 8 },
                    { name: 'è…¿æ¨æ©Ÿ', defaultSets: 3, defaultReps: '10-15', calFactor: 8 },
                    { name: 'åˆ†è…¿è¹²', defaultSets: 3, defaultReps: '10-12', calFactor: 8 },
                    { name: 'æ£’å¼ (Plank)', defaultSets: 3, defaultReps: '60s', calFactor: 8 },
                ]
            },
            {
                id: 'cardio',
                type: 'cardio',
                name: 'æœ‰æ°§ (ç‡ƒè„‚/å¿ƒè‚º)',
                exercises: [
                    { name: 'è·‘æ­¥æ©Ÿ (Treadmill)', defaultSets: '30', defaultReps: 'mins', calFactor: 8 },
                    { name: 'æˆ¶å¤–è·‘æ­¥ (Running)', defaultSets: '5', defaultReps: 'km', calFactor: 10 },
                    { name: 'é£›è¼ª/å–®è»Š (Cycling)', defaultSets: '45', defaultReps: 'mins', calFactor: 8 },
                    { name: 'æ»‘æ­¥æ©Ÿ (Elliptical)', defaultSets: '30', defaultReps: 'mins', calFactor: 8 },
                    { name: 'è·³ç¹© (Jump Rope)', defaultSets: '15', defaultReps: 'mins', calFactor: 12 },
                    { name: 'HIIT é–“æ­‡é‹å‹•', defaultSets: '20', defaultReps: 'mins', calFactor: 12 },
                ]
            }
        ];

        // --- å…ƒä»¶ï¼šå„€è¡¨æ¿ (Dashboard) ---
        const Dashboard = ({ todayInput, setTodayInput, handleLogSubmit, saveMessage, currentWeight, bmi, tdee, recommendedCalories, daysLeft, currentDate, setCurrentDate, recommendedProtein, logs, currentBodyFat, currentMuscleMass, currentVisceralFat, todayStr, targetWeight }) => {
            const todayCalories = todayInput.calories ? parseFloat(todayInput.calories) : 0;
            const todayBurned = todayInput.burnedCalories ? parseFloat(todayInput.burnedCalories) : 0;
            const netCalories = (tdee + todayBurned) - todayCalories; // Net balance
            const deficit = netCalories > 0 ? netCalories : 0; // Only positive deficit counts as weight loss progress

            const caloriePct = Math.min((todayCalories / recommendedCalories) * 100, 100);
            const calorieColor = todayCalories > recommendedCalories ? 'bg-red-500' : 'bg-orange-500';
            const isEditingPast = currentDate !== todayStr;

            // æ¯é€±å‹µå¿—é‡‘å¥é‚è¼¯
            const quote = useMemo(() => {
                const now = new Date();
                const onejan = new Date(now.getFullYear(), 0, 1);
                const week = Math.ceil((((now.getTime() - onejan.getTime()) / 86400000) + onejan.getDay() + 1) / 7);
                return INSPIRATIONAL_QUOTES[week % INSPIRATIONAL_QUOTES.length];
            }, []);

            return (
                <div className="space-y-6 animate-fade-in">
                    {/* Weekly Quote */}
                    <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-xl border border-yellow-100 flex items-start gap-3 shadow-sm">
                        <div className="p-2 bg-yellow-100 rounded-full text-yellow-600 mt-1 shrink-0">
                            <Sparkles className="w-5 h-5" />
                        </div>
                        <div>
                            <h4 className="text-sm font-bold text-yellow-800 mb-1">ğŸ’¡ æœ¬é€±å‹µå¿—é‡‘å¥</h4>
                            <p className="text-sm text-yellow-900 font-medium italic">"{quote}"</p>
                        </div>
                    </div>

                    {/* Top Stats Cards - Row 1: Weight & Time */}
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div className="bg-white p-3 rounded-xl shadow-sm border-l-4 border-l-red-600 border border-slate-100">
                            <p className="text-xs text-slate-500 mb-1 font-semibold tracking-wide uppercase">ç›®å‰é«”é‡ / BMI</p>
                            <div className="flex items-baseline gap-2">
                                <p className="text-xl font-black text-slate-800">{currentWeight}</p>
                                <span className="text-xs px-1.5 py-0.5 rounded bg-slate-100 text-slate-600 font-bold">BMI {bmi}</span>
                            </div>
                        </div>
                        <div className="bg-white p-3 rounded-xl shadow-sm border-l-4 border-l-orange-500 border border-slate-100">
                            <p className="text-xs text-slate-500 mb-1 font-semibold tracking-wide uppercase">æ¯æ—¥æ¶ˆè€— TDEE</p>
                            <div className="flex items-baseline gap-2">
                                <p className="text-xl font-black text-orange-600">{tdee}</p>
                                <span className="text-xs text-slate-400 font-bold">kcal</span>
                            </div>
                        </div>
                        <div className="bg-white p-3 rounded-xl shadow-sm border-l-4 border-l-red-500 border border-slate-100">
                            <p className="text-xs text-slate-500 mb-1 font-semibold tracking-wide uppercase">é‹å‹•æ¶ˆè€—</p>
                            <div className="flex items-baseline gap-2">
                                <p className="text-xl font-black text-red-600">{todayBurned}</p>
                                <span className="text-xs text-slate-400 font-bold">kcal</span>
                            </div>
                        </div>
                        <div className="bg-white p-3 rounded-xl shadow-sm border-l-4 border-l-emerald-500 border border-slate-100">
                            <p className="text-xs text-slate-500 mb-1 font-semibold tracking-wide uppercase">ä»Šæ—¥ç†±é‡èµ¤å­—</p>
                            <div className="flex items-baseline gap-2">
                                <p className={`text-xl font-black ${netCalories > 0 ? 'text-emerald-600' : 'text-red-600'}`}>
                                    {netCalories > 0 ? `+${netCalories}` : netCalories}
                                </p>
                                <span className="text-xs text-slate-400 font-bold">kcal</span>
                            </div>
                        </div>
                    </div>

                    {/* Top Stats Cards - Row 2: Body Composition */}
                    <div className="grid grid-cols-3 gap-2">
                        <div className="bg-white p-3 rounded-xl shadow-sm border border-slate-100">
                            <div className="flex items-center gap-1 mb-1">
                                <Activity className="w-3 h-3 text-purple-500" />
                                <p className="text-[10px] text-slate-500 font-semibold uppercase">é«”è„‚ç‡</p>
                            </div>
                            <div className="flex items-baseline gap-1">
                                <p className="text-lg font-black text-slate-800">{currentBodyFat || '--'}</p>
                                <span className="text-[10px] text-slate-400 font-bold">%</span>
                            </div>
                        </div>
                        <div className="bg-white p-3 rounded-xl shadow-sm border border-slate-100">
                            <div className="flex items-center gap-1 mb-1">
                                <Dumbbell className="w-3 h-3 text-indigo-500" />
                                <p className="text-[10px] text-slate-500 font-semibold uppercase">è‚Œè‚‰é‡</p>
                            </div>
                            <div className="flex items-baseline gap-1">
                                <p className="text-lg font-black text-slate-800">{currentMuscleMass || '--'}</p>
                                <span className="text-[10px] text-slate-400 font-bold">kg</span>
                            </div>
                        </div>
                        <div className="bg-white p-3 rounded-xl shadow-sm border border-slate-100">
                            <div className="flex items-center gap-1 mb-1">
                                <Zap className="w-3 h-3 text-red-500" />
                                <p className="text-[10px] text-slate-500 font-semibold uppercase">å…§è‡Ÿè„‚è‚ª</p>
                            </div>
                            <div className="flex items-baseline gap-1">
                                <p className="text-lg font-black text-slate-800">{currentVisceralFat || '--'}</p>
                                <span className="text-[10px] text-slate-400 font-bold">Lv</span>
                            </div>
                        </div>
                    </div>

                    {/* Nutrition Progress */}
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <h3 className="font-bold text-slate-700 mb-3 flex items-center gap-2 text-sm">
                            <Utensils className="w-4 h-4 text-orange-500" />
                            ä»Šæ—¥ç‡Ÿé¤Šå„€è¡¨æ¿
                        </h3>
                        <div className="space-y-3">
                            <div>
                                <div className="flex justify-between text-xs font-bold text-slate-600 mb-1">
                                    <span>ç†±é‡æ”å–: {todayCalories} / {recommendedCalories} kcal</span>
                                    <span className={todayCalories > recommendedCalories ? 'text-red-500' : 'text-emerald-500'}>
                                        {todayCalories > recommendedCalories ? 'å·²è¶…æ¨™' : 'æ§åˆ¶ä¸­'}
                                    </span>
                                </div>
                                <div className="w-full bg-slate-100 rounded-full h-3 overflow-hidden shadow-inner">
                                    <div 
                                        className={`h-3 rounded-full transition-all duration-700 ${calorieColor}`}
                                        style={{ width: `${caloriePct}%` }}
                                    ></div>
                                </div>
                            </div>
                            <div className="flex items-center gap-2 text-[10px] text-slate-500 bg-slate-50 p-2 rounded">
                                <AlertCircle className="w-3 h-3 text-blue-500" />
                                <span>å»ºè­°è›‹ç™½è³ªæ”å–: <strong>{recommendedProtein}g</strong> (é«”é‡ x 2.0g) ä»¥ç¶­æŒè‚Œè‚‰é‡</span>
                            </div>
                        </div>
                    </div>

                    {/* Charts */}
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <h3 className="font-bold text-slate-700 mb-4 flex items-center gap-2 text-sm">
                            <TrendingDown className="w-4 h-4 text-red-600" />
                            æˆ°é¬¥æ•¸æ“šåˆ†æ
                        </h3>
                        <div className="h-64 w-full">
                            {Recharts && AreaChart ? (
                                <ResponsiveContainer width="100%" height="100%">
                                    <ComposedChart data={logs}>
                                        <defs>
                                            <linearGradient id="colorWeight" x1="0" y1="0" x2="0" y2="1">
                                                <stop offset="5%" stopColor="#dc2626" stopOpacity={0.2}/>
                                                <stop offset="95%" stopColor="#dc2626" stopOpacity={0}/>
                                            </linearGradient>
                                        </defs>
                                        <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f1f5f9" />
                                        <XAxis dataKey="date" tick={{fontSize: 10, fill: '#64748b', fontWeight: 'bold'}} tickMargin={5} />
                                        
                                        {/* Weight Axis (Left) */}
                                        <YAxis yAxisId="left" domain={['dataMin - 1', 'dataMax + 1']} tick={{fontSize: 10, fill: '#64748b', fontWeight: 'bold'}} />
                                        
                                        {/* Body Fat Axis (Right - Visible) */}
                                        <YAxis yAxisId="fat" orientation="right" domain={['dataMin - 2', 'dataMax + 2']} tick={{fontSize: 10, fill: '#8b5cf6', fontWeight: 'bold'}} unit="%" />
                                        
                                        {/* Calories Axis (Hidden) */}
                                        <YAxis yAxisId="calories" orientation="right" domain={[0, 'dataMax + 500']} hide />

                                        <Tooltip 
                                            contentStyle={{borderRadius: '8px', border: 'none', boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)', backgroundColor: '#1e293b', color: '#fff'}}
                                            itemStyle={{color: '#fff'}}
                                            labelStyle={{color: '#94a3b8', marginBottom: '0.5rem'}}
                                        />
                                        <ReferenceLine y={targetWeight} label={{ value: 'ç›®æ¨™', fill: '#ef4444', fontSize: 10, position: 'right' }} stroke="#ef4444" strokeDasharray="3 3" yAxisId="left" />
                                        
                                        {/* Weight Area */}
                                        <Area 
                                            yAxisId="left"
                                            type="monotone" 
                                            dataKey="weight" 
                                            stroke="#dc2626" 
                                            strokeWidth={3}
                                            fillOpacity={1} 
                                            fill="url(#colorWeight)" 
                                            name="é«”é‡ (kg)"
                                            activeDot={{r: 5, strokeWidth: 0, fill: '#dc2626'}}
                                        />

                                        {/* Muscle Line */}
                                        <Line 
                                            yAxisId="left" 
                                            type="monotone" 
                                            dataKey="muscleMass" 
                                            stroke="#0ea5e9" 
                                            strokeWidth={3} 
                                            dot={{r: 4, fill: '#0ea5e9'}} 
                                            name="è‚Œè‚‰ (kg)" 
                                        />
                                        
                                        {/* Calories Bar */}
                                        <Bar 
                                            yAxisId="calories"
                                            dataKey="calories" 
                                            barSize={15}
                                            fill="#f59e0b" 
                                            radius={[4, 4, 0, 0]}
                                            name="æ”å–ç†±é‡ (kcal)"
                                            opacity={0.6}
                                        />

                                        {/* Body Fat Line */}
                                        <Line 
                                            yAxisId="fat"
                                            type="monotone" 
                                            dataKey="bodyFat" 
                                            stroke="#8b5cf6" 
                                            strokeWidth={3} 
                                            dot={{r: 4, fill: '#8b5cf6'}} 
                                            name="é«”è„‚ (%)" 
                                        />

                                        <Legend verticalAlign="top" height={36} iconType="circle"/>
                                    </ComposedChart>
                                </ResponsiveContainer>
                            ) : (
                                <div className="w-full h-full flex items-center justify-center text-slate-400 bg-slate-50 rounded-lg border border-dashed border-slate-300">
                                    <p>åœ–è¡¨è¼‰å…¥ä¸­... (è‹¥é•·æ™‚é–“æœªé¡¯ç¤ºï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·š)</p>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Quick Log Input (Body Stats) */}
                    <div className={`bg-gradient-to-br p-4 rounded-xl shadow-xl text-white border border-red-900/50 relative overflow-hidden transition-all ${isEditingPast ? 'from-orange-900 to-red-900 ring-2 ring-orange-400' : 'from-gray-900 to-red-900'}`}>
                        <div className="absolute top-0 right-0 p-8 opacity-10 pointer-events-none">
                            <Flame className="w-32 h-32 text-red-500" />
                        </div>
                        
                        <div className="flex justify-between items-center mb-4 relative z-10">
                            <h3 className="font-bold text-lg flex items-center gap-2">
                                {isEditingPast ? (
                                    <>
                                        <Edit className="w-5 h-5 text-orange-400" />
                                        <span className="text-orange-200">ç·¨è¼¯ç´€éŒ„ ({currentDate})</span>
                                    </>
                                ) : (
                                    <>
                                        <Plus className="w-5 h-5 text-red-400" />
                                        ä»Šæ—¥é«”æ…‹ç´€éŒ„
                                    </>
                                )}
                            </h3>
                            <div className="flex items-center gap-2">
                                {isEditingPast && (
                                    <button 
                                        onClick={() => setCurrentDate(todayStr)}
                                        className="bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded flex items-center gap-1 transition-colors"
                                    >
                                        <RotateCcw className="w-3 h-3" /> å›ä»Šå¤©
                                    </button>
                                )}
                                <div className="flex items-center gap-2 bg-black/20 rounded-lg px-2 py-1 border border-white/10">
                                    <Calendar className="w-4 h-4 text-red-400" />
                                    <input 
                                        type="date" 
                                        value={currentDate}
                                        onChange={(e) => setCurrentDate(e.target.value)}
                                        className="bg-transparent text-sm text-white font-bold outline-none border-none p-0 w-28 text-right cursor-pointer"
                                    />
                                </div>
                            </div>
                        </div>

                        <form onSubmit={handleLogSubmit} className="grid grid-cols-2 gap-3 relative z-10">
                            <div>
                                <label className="text-xs text-red-200/70 block mb-1 flex items-center gap-1 font-bold"><Scale className="w-3 h-3"/> é«”é‡ (kg)</label>
                                <input 
                                    type="number" step="0.1" 
                                    value={todayInput.weight}
                                    onChange={(e) => setTodayInput({...todayInput, weight: e.target.value})}
                                    className="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-red-500 focus:bg-black/50 transition-all font-bold placeholder-white/20 min-w-0"
                                    placeholder=""
                                />
                            </div>
                            <div>
                                <label className="text-xs text-red-200/70 block mb-1 flex items-center gap-1 font-bold"><Activity className="w-3 h-3"/> é«”è„‚ (%)</label>
                                <input 
                                    type="number" step="0.1" 
                                    value={todayInput.bodyFat}
                                    onChange={(e) => setTodayInput({...todayInput, bodyFat: e.target.value})}
                                    className="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-red-500 focus:bg-black/50 transition-all font-bold placeholder-white/20 min-w-0"
                                    placeholder=""
                                />
                            </div>
                            {/* New Fields for Body Composition */}
                            <div>
                                <label className="text-xs text-red-200/70 block mb-1 flex items-center gap-1 font-bold"><Dumbbell className="w-3 h-3"/> è‚Œè‚‰é‡ (kg)</label>
                                <input 
                                    type="number" step="0.1" 
                                    value={todayInput.muscleMass}
                                    onChange={(e) => setTodayInput({...todayInput, muscleMass: e.target.value})}
                                    className="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-red-500 focus:bg-black/50 transition-all font-bold placeholder-white/20 min-w-0"
                                    placeholder=""
                                />
                            </div>
                            <div>
                                <label className="text-xs text-red-200/70 block mb-1 flex items-center gap-1 font-bold"><Zap className="w-3 h-3"/> å…§è‡Ÿè„‚è‚ª (Lv)</label>
                                <input 
                                    type="number" step="0.5" 
                                    value={todayInput.visceralFat}
                                    onChange={(e) => setTodayInput({...todayInput, visceralFat: e.target.value})}
                                    className="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-red-500 focus:bg-black/50 transition-all font-bold placeholder-white/20 min-w-0"
                                    placeholder=""
                                />
                            </div>

                            <button type="submit" className="col-span-2 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white p-3 rounded-lg transition-all font-black mt-2 flex justify-center items-center gap-2 shadow-lg shadow-red-900/50 uppercase tracking-widest text-sm transform active:scale-95 duration-100">
                                <Save className="w-4 h-4" /> {isEditingPast ? `æ›´æ–°ç´€éŒ„ (${currentDate})` : 'å„²å­˜ç´€éŒ„'}
                            </button>
                            {saveMessage && (
                                <div className="col-span-2 text-center text-emerald-400 text-sm font-bold animate-pulse">
                                    {saveMessage}
                                </div>
                            )}
                        </form>
                    </div>
                </div>
            );
        };

        // --- å…ƒä»¶ï¼šè¡€å£“é‡æ¸¬ (BloodPressureSection) ---
        const BloodPressureSection = ({ todayInput, setTodayInput, handleLogSubmit, saveMessage, logs, currentDate, setCurrentDate, todayStr }) => {
            const isEditingPast = currentDate !== todayStr;
            const currentSystolic = todayInput.systolic || '';
            const currentDiastolic = todayInput.diastolic || '';
            const currentPulse = todayInput.pulse || '';

            // Get status color based on BP
            const getBPStatus = (sys, dia) => {
                if (!sys || !dia) return { text: 'æœªæ¸¬é‡', color: 'text-slate-400' };
                if (sys < 120 && dia < 80) return { text: 'æ­£å¸¸è¡€å£“ ğŸŸ¢', color: 'text-emerald-500' };
                if (sys >= 140 || dia >= 90) return { text: 'é«˜è¡€å£“ ğŸ”´', color: 'text-red-500' };
                if (sys >= 130 || dia >= 80) return { text: 'è¡€å£“åé«˜ ğŸŸ ', color: 'text-orange-500' };
                return { text: 'æ­£å¸¸åé«˜ ğŸŸ¡', color: 'text-yellow-500' };
            };

            const bpStatus = getBPStatus(parseFloat(currentSystolic), parseFloat(currentDiastolic));

            return (
                <div className="space-y-6 animate-fade-in pb-20">
                    <div className="flex justify-between items-center">
                        <h2 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <HeartPulse className="w-6 h-6 text-rose-500" />
                            è¡€å£“ç®¡ç†
                        </h2>
                        <div className="flex items-center gap-2 bg-white rounded-lg px-3 py-1 border border-slate-200 shadow-sm">
                            <Calendar className="w-4 h-4 text-slate-500" />
                            <input 
                                type="date" 
                                value={currentDate}
                                onChange={(e) => setCurrentDate(e.target.value)}
                                className="bg-transparent text-sm text-slate-600 font-bold outline-none border-none p-0 w-28 text-right cursor-pointer"
                            />
                        </div>
                    </div>

                    {/* Chart */}
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="font-bold text-slate-700 text-sm">è¿‘æœŸè¡€å£“è¶¨å‹¢</h3>
                            <div className="text-xs font-bold text-slate-400 flex gap-2">
                                <span className="flex items-center gap-1"><span className="w-2 h-2 rounded-full bg-rose-500"></span>æ”¶ç¸®å£“</span>
                                <span className="flex items-center gap-1"><span className="w-2 h-2 rounded-full bg-blue-500"></span>èˆ’å¼µå£“</span>
                            </div>
                        </div>
                        <div className="h-64 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <LineChart data={logs}>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f1f5f9" />
                                    <XAxis dataKey="date" tick={{fontSize: 10, fill: '#64748b'}} tickMargin={5} />
                                    <YAxis domain={['dataMin - 10', 'dataMax + 10']} tick={{fontSize: 10, fill: '#64748b'}} />
                                    <Tooltip contentStyle={{borderRadius: '8px', border: 'none', boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)', fontSize: '12px'}} />
                                    <Line type="monotone" dataKey="systolic" stroke="#f43f5e" strokeWidth={2} dot={{r: 3}} name="æ”¶ç¸®å£“" />
                                    <Line type="monotone" dataKey="diastolic" stroke="#3b82f6" strokeWidth={2} dot={{r: 3}} name="èˆ’å¼µå£“" />
                                </LineChart>
                            </ResponsiveContainer>
                        </div>
                    </div>

                    {/* Input Card */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100 relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-20 h-20 bg-rose-50 rounded-bl-full -mr-4 -mt-4 z-0"></div>
                        
                        <div className="relative z-10">
                            <div className="flex justify-between items-center mb-6">
                                <h3 className="font-bold text-slate-700 flex items-center gap-2">
                                    <PlusCircle className="w-5 h-5 text-rose-500" />
                                    æ–°å¢æ¸¬é‡
                                </h3>
                                <span className={`text-xs font-bold ${bpStatus.color} bg-slate-50 px-2 py-1 rounded border border-slate-100`}>
                                    {bpStatus.text}
                                </span>
                            </div>

                            <form onSubmit={handleLogSubmit} className="space-y-5">
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs font-bold text-slate-400 mb-1">æ”¶ç¸®å£“ (SYS)</label>
                                        <div className="relative">
                                            <input 
                                                type="number" 
                                                className="w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-lg font-black text-slate-700 focus:ring-2 focus:ring-rose-500 outline-none text-center"
                                                placeholder="0"
                                                value={currentSystolic}
                                                onChange={(e) => setTodayInput({...todayInput, systolic: e.target.value})}
                                            />
                                            <span className="absolute right-3 bottom-3 text-[10px] text-slate-400 font-bold">mmHg</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-xs font-bold text-slate-400 mb-1">èˆ’å¼µå£“ (DIA)</label>
                                        <div className="relative">
                                            <input 
                                                type="number" 
                                                className="w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-lg font-black text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none text-center"
                                                placeholder="0"
                                                value={currentDiastolic}
                                                onChange={(e) => setTodayInput({...todayInput, diastolic: e.target.value})}
                                            />
                                            <span className="absolute right-3 bottom-3 text-[10px] text-slate-400 font-bold">mmHg</span>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-xs font-bold text-slate-400 mb-1">å¿ƒç‡ (PULSE)</label>
                                    <div className="relative">
                                        <input 
                                            type="number" 
                                            className="w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-lg font-black text-slate-700 focus:ring-2 focus:ring-purple-500 outline-none text-center"
                                            placeholder="0"
                                            value={currentPulse}
                                            onChange={(e) => setTodayInput({...todayInput, pulse: e.target.value})}
                                        />
                                        <span className="absolute right-4 bottom-3 text-[10px] text-slate-400 font-bold">bpm</span>
                                        <div className="absolute left-4 top-3.5 text-rose-400 animate-pulse">
                                            <HeartPulse className="w-5 h-5" />
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" className="w-full bg-gradient-to-r from-rose-500 to-orange-500 hover:from-rose-600 hover:to-orange-600 text-white p-3 rounded-lg transition-all font-bold shadow-lg shadow-rose-200 flex justify-center items-center gap-2">
                                    <Save className="w-4 h-4" /> {isEditingPast ? 'æ›´æ–°æ•¸å€¼' : 'å„²å­˜æ•¸å€¼'}
                                </button>
                                
                                {saveMessage && (
                                    <div className="text-center text-emerald-500 text-sm font-bold animate-pulse">
                                        {saveMessage}
                                    </div>
                                )}
                            </form>
                        </div>
                    </div>
                </div>
            );
        };

        // --- å…ƒä»¶ï¼šé£²é£Ÿ (DietSection) ---
        const DietSection = ({ todayInput, setTodayInput, handleLogSubmit, saveMessage, recommendedCalories, recommendedProtein, currentDate, setCurrentDate, todayStr }) => {
            const isEditingPast = currentDate !== todayStr;
            const [customItem, setCustomItem] = useState({ name: '', cal: '', pro: '' });
            const [searchTerm, setSearchTerm] = useState('');

            // æœå°‹éæ¿¾é‚è¼¯
            const filteredFoods = useMemo(() => {
                if (!searchTerm.trim()) return COMMON_FOODS;
                const lowerTerm = searchTerm.toLowerCase();
                
                return COMMON_FOODS.map(group => ({
                    ...group,
                    items: group.items.filter(item => 
                        item.name.toLowerCase().includes(lowerTerm)
                    )
                })).filter(group => group.items.length > 0);
            }, [searchTerm]);

            const handleAddCustomItem = () => {
                if (!customItem.name || !customItem.cal) {
                    alert('è«‹è¼¸å…¥é£Ÿç‰©åç¨±èˆ‡ç†±é‡');
                    return;
                }

                const addCal = parseFloat(customItem.cal) || 0;
                const addPro = parseFloat(customItem.pro) || 0;

                setTodayInput(prev => {
                    const currentCal = parseFloat(prev.calories) || 0;
                    const currentPro = parseFloat(prev.protein) || 0;
                    const currentNotes = prev.notes || "";
                    
                    return {
                        ...prev,
                        calories: (currentCal + addCal).toString(),
                        protein: (currentPro + addPro).toString(),
                        notes: currentNotes ? `${currentNotes} +${customItem.name}` : `+${customItem.name}`
                    };
                });

                setCustomItem({ name: '', cal: '', pro: '' });
                alert(`å·²åŠ å…¥ï¼š${customItem.name}`);
            };

            const handleAddFood = (e) => {
                const selectedValue = e.target.value;
                if (!selectedValue) return;

                let foundFood = null;
                for (const cat of COMMON_FOODS) {
                    const item = cat.items.find(i => i.name === selectedValue);
                    if (item) {
                        foundFood = item;
                        break;
                    }
                }

                if (foundFood) {
                    setTodayInput(prev => {
                        const currentCal = parseFloat(prev.calories) || 0;
                        const currentPro = parseFloat(prev.protein) || 0;
                        const currentNotes = prev.notes || "";
                        
                        return {
                            ...prev,
                            calories: (currentCal + foundFood.cal).toString(),
                            protein: (currentPro + foundFood.pro).toString(),
                            notes: currentNotes ? `${currentNotes} +${foundFood.name}` : `+${foundFood.name}`
                        };
                    });
                }
                
                // é‡ç½®
                e.target.value = "";
                setSearchTerm(""); // é¸æ“‡å¾Œæ¸…ç©ºæœå°‹ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æŸ¥çœ‹å®Œæ•´åˆ—è¡¨
            };

            const todayCalories = todayInput.calories ? parseFloat(todayInput.calories) : 0;
            const caloriePct = Math.min((todayCalories / recommendedCalories) * 100, 100);
            const calorieColor = todayCalories > recommendedCalories ? 'bg-red-500' : 'bg-emerald-500';

            return (
                <div className="space-y-6 animate-fade-in pb-20">
                    <div className="flex justify-between items-center">
                        <h2 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <Utensils className="w-6 h-6 text-orange-500" />
                            é£²é£Ÿæ§åˆ¶
                        </h2>
                        <div className="flex items-center gap-2 bg-white rounded-lg px-3 py-1 border border-slate-200 shadow-sm">
                            <Calendar className="w-4 h-4 text-slate-500" />
                            <input 
                                type="date" 
                                value={currentDate}
                                onChange={(e) => setCurrentDate(e.target.value)}
                                className="bg-transparent text-sm text-slate-600 font-bold outline-none border-none p-0 w-28 text-right cursor-pointer"
                            />
                        </div>
                    </div>

                    {/* Status Card */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <div className="flex justify-between text-sm font-bold text-slate-600 mb-2">
                            <span>ä»Šæ—¥ç†±é‡æ”å–</span>
                            <span className={todayCalories > recommendedCalories ? 'text-red-500' : 'text-emerald-500'}>
                                {todayCalories} / {recommendedCalories} kcal
                            </span>
                        </div>
                        <div className="w-full bg-slate-100 rounded-full h-4 overflow-hidden shadow-inner mb-4">
                            <div 
                                className={`h-4 rounded-full transition-all duration-700 ${calorieColor}`}
                                style={{ width: `${caloriePct}%` }}
                            ></div>
                        </div>
                        <div className="flex gap-2">
                             <div className="flex-1 bg-orange-50 p-3 rounded-lg text-center">
                                 <p className="text-xs text-orange-400 font-bold">è›‹ç™½è³ª</p>
                                 <p className="text-xl font-black text-orange-600">{todayInput.protein || 0}<span className="text-xs text-orange-400">g</span></p>
                                 <p className="text-[10px] text-orange-300">ç›®æ¨™: {recommendedProtein}g</p>
                             </div>
                             <div className="flex-1 bg-blue-50 p-3 rounded-lg text-center">
                                 <p className="text-xs text-blue-400 font-bold">å‰©é¤˜ç†±é‡</p>
                                 <p className={`text-xl font-black ${recommendedCalories - todayCalories < 0 ? 'text-red-500' : 'text-blue-600'}`}>
                                     {recommendedCalories - todayCalories}
                                 </p>
                                 <p className="text-[10px] text-blue-300">kcal</p>
                             </div>
                        </div>
                    </div>

                    {/* Food Logger */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h3 className="font-bold text-slate-700 mb-4 flex items-center gap-2">
                            <PlusCircle className="w-5 h-5 text-orange-500" />
                            æ–°å¢é£²é£Ÿ
                        </h3>

                        {/* Food Selector with Search */}
                        <div className="mb-6">
                            <label className="block text-xs font-bold text-slate-400 mb-2">å¿«é€Ÿé¸å–® (è‡ªå‹•ç´¯åŠ )</label>
                            
                            {/* æœå°‹æ¡† */}
                            <div className="relative mb-2">
                                <div className="absolute left-3 top-2.5 text-slate-400">
                                    <Search className="w-4 h-4" />
                                </div>
                                <input 
                                    type="text"
                                    placeholder="ğŸ” æœå°‹é£Ÿç‰© (å¦‚: è›‹é¤…, æ‹¿éµ...)"
                                    className="w-full bg-slate-50 border border-slate-200 rounded-lg pl-9 pr-3 py-2 text-sm focus:outline-none focus:border-orange-500 transition-colors"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                            </div>

                            {/* ä¸‹æ‹‰é¸å–® */}
                            <div className="relative">
                                <select 
                                    onChange={handleAddFood} 
                                    value=""
                                    className="w-full bg-slate-50 border border-slate-200 rounded-lg pl-3 pr-8 py-3 text-slate-700 text-sm font-medium focus:outline-none focus:border-orange-500 appearance-none cursor-pointer hover:bg-slate-100 transition-colors"
                                >
                                    <option value="" disabled>
                                        {searchTerm ? `ğŸ‘‡ è«‹é¸æ“‡æœå°‹çµæœ (${filteredFoods.reduce((acc, g) => acc + g.items.length, 0)} é …)` : 'ğŸ” é»æ­¤ç€è¦½å®Œæ•´èœå–®...'}
                                    </option>
                                    {filteredFoods.map((cat, idx) => (
                                        <optgroup key={idx} label={cat.category}>
                                            {cat.items.map((item, i) => (
                                                <option key={i} value={item.name}>
                                                    {item.name} ({item.cal}å¤§å¡)
                                                </option>
                                            ))}
                                        </optgroup>
                                    ))}
                                    {filteredFoods.length === 0 && (
                                        <option disabled>æ‰¾ä¸åˆ°ç›¸é—œé£Ÿç‰©</option>
                                    )}
                                </select>
                                <div className="absolute right-3 top-3.5 pointer-events-none text-slate-400">
                                    <PlusCircle className="w-4 h-4" />
                                </div>
                            </div>
                        </div>
                        
                        {/* Custom Food Input */}
                        <div className="mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200">
                            <label className="block text-xs font-bold text-slate-400 mb-2">è‡ªè¡Œè¼¸å…¥ (è‡ªå‹•ç´¯åŠ )</label>
                            <div className="flex gap-2 mb-2">
                                <input 
                                    type="text" 
                                    placeholder="é£Ÿç‰©åç¨± (å¦‚: é›æ’)"
                                    className="w-full flex-[2] border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-orange-500 min-w-0"
                                    value={customItem.name}
                                    onChange={e => setCustomItem({...customItem, name: e.target.value})}
                                />
                            </div>
                            <div className="flex gap-2">
                                <input 
                                    type="number" 
                                    placeholder="ç†±é‡"
                                    className="flex-1 border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-orange-500 min-w-0"
                                    value={customItem.cal}
                                    onChange={e => setCustomItem({...customItem, cal: e.target.value})}
                                />
                                <input 
                                    type="number" 
                                    placeholder="è›‹ç™½(é¸å¡«)"
                                    className="flex-1 border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-orange-500 min-w-0"
                                    value={customItem.pro}
                                    onChange={e => setCustomItem({...customItem, pro: e.target.value})}
                                />
                                <button 
                                    type="button"
                                    onClick={handleAddCustomItem}
                                    className="bg-orange-500 text-white px-3 py-1 rounded text-sm font-bold hover:bg-orange-600 transition-colors shrink-0"
                                >
                                    åŠ å…¥
                                </button>
                            </div>
                        </div>

                        {/* Manual Input */}
                        <form onSubmit={handleLogSubmit} className="space-y-4 pt-4 border-t border-slate-100">
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-xs text-slate-500 block mb-1 font-bold">ç¸½ç†±é‡ (kcal)</label>
                                    <input 
                                        type="number"
                                        value={todayInput.calories}
                                        onChange={(e) => setTodayInput({...todayInput, calories: e.target.value})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-orange-500 outline-none font-bold text-slate-700 bg-slate-50 min-w-0"
                                        placeholder="0"
                                    />
                                </div>
                                <div>
                                    <label className="text-xs text-slate-500 block mb-1 font-bold">ç¸½è›‹ç™½è³ª (g)</label>
                                    <input 
                                        type="number"
                                        value={todayInput.protein}
                                        onChange={(e) => setTodayInput({...todayInput, protein: e.target.value})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-orange-500 outline-none font-bold text-slate-700 bg-slate-50 min-w-0"
                                        placeholder="0"
                                    />
                                </div>
                            </div>
                            
                            <div>
                                <label className="text-xs text-slate-500 block mb-1 font-bold">é£²é£Ÿç­†è¨˜ / æˆ°é¬¥æ—¥è¨˜</label>
                                <textarea 
                                    value={todayInput.notes}
                                    onChange={(e) => setTodayInput({...todayInput, notes: e.target.value})}
                                    className="w-full border border-slate-200 rounded-lg p-3 text-slate-700 focus:ring-2 focus:ring-orange-500 outline-none bg-slate-50 text-sm h-32 resize-none"
                                    placeholder="ç´€éŒ„ä»Šå¤©åƒäº†ä»€éº¼..."
                                />
                            </div>

                            <button type="submit" className="w-full bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg transition-colors font-bold flex justify-center items-center gap-2 shadow-lg shadow-orange-200">
                                <Save className="w-4 h-4" /> {isEditingPast ? 'æ›´æ–°é£²é£Ÿç´€éŒ„' : 'å„²å­˜é£²é£Ÿç´€éŒ„'}
                            </button>
                            
                            {saveMessage && (
                                <div className="text-center text-emerald-500 text-sm font-bold animate-pulse">
                                    {saveMessage}
                                </div>
                            )}
                        </form>
                    </div>
                </div>
            );
        };

        const WorkoutSection = ({ selectedPlanId, setSelectedPlanId, workoutLogs, updateExerciseLog, toggleExerciseCompletion, currentDate, setCurrentDate }) => {
            const activePlan = DEFAULT_WORKOUTS.find(p => p.id === selectedPlanId);
            const isCardio = activePlan.type === 'cardio';
            const dailyBurned = useMemo(() => {
                const logs = workoutLogs[currentDate];
                if (!logs) return 0;
                let total = 0;
                Object.keys(logs).forEach(planId => {
                    const plan = DEFAULT_WORKOUTS.find(p => p.id === planId);
                    if (plan) {
                        plan.exercises.forEach((ex, idx) => {
                            const log = logs[planId][idx];
                            if (log && log.completed) {
                                let val = 0;
                                if (plan.type === 'cardio') {
                                    val = parseFloat(log.duration) || 0;
                                } else {
                                    val = ex.defaultSets; 
                                }
                                total += val * (ex.calFactor || 0);
                            }
                        });
                    }
                });
                return total;
            }, [workoutLogs, currentDate]);

            return (
                <div className="space-y-4 animate-fade-in pb-20">
                    <div className="flex justify-between items-center">
                        <h2 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <Dumbbell className="w-6 h-6 text-red-600" />
                            ä»Šæ—¥èœå–®
                        </h2>
                        <div className="flex items-center gap-3">
                             <div className="bg-red-50 text-red-600 px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1">
                                <Flame className="w-3 h-3" />
                                {dailyBurned} kcal
                            </div>
                            <div className="flex items-center gap-2 bg-white rounded-lg px-3 py-1 border border-slate-200 shadow-sm">
                                <Calendar className="w-4 h-4 text-slate-500" />
                                <input 
                                    type="date" 
                                    value={currentDate}
                                    onChange={(e) => setCurrentDate(e.target.value)}
                                    className="bg-transparent text-sm text-slate-600 font-bold outline-none border-none p-0 w-28 text-right cursor-pointer"
                                />
                            </div>
                        </div>
                    </div>
                
                    {/* Menu Selection */}
                    <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                        {DEFAULT_WORKOUTS.map(plan => (
                            <button
                                key={plan.id}
                                onClick={() => setSelectedPlanId(plan.id)}
                                className={`px-5 py-2.5 rounded-lg whitespace-nowrap text-sm font-bold transition-all shadow-sm border transform active:scale-95 duration-100 ${
                                    selectedPlanId === plan.id 
                                    ? 'bg-gradient-to-r from-red-600 to-orange-600 text-white border-red-600 shadow-red-200' 
                                    : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50'
                                }`}
                            >
                                {plan.name}
                            </button>
                        ))}
                    </div>

                    {/* Exercise List */}
                    <div className="space-y-3">
                        {activePlan.exercises.map((ex, idx) => {
                            const logData = workoutLogs[currentDate]?.[selectedPlanId]?.[idx] || {};
                            const isDone = logData.completed;
                            const estimatedBurn = isCardio 
                                ? (parseFloat(logData.duration) || 0) * (ex.calFactor || 0)
                                : (ex.defaultSets * (ex.calFactor || 0)); // Simplified estimation for strength

                            return (
                                <div key={idx} className={`bg-white rounded-xl shadow-sm border-l-4 transition-all ${isDone ? 'border-l-red-500 border-red-100 bg-red-50/20' : 'border-l-slate-200 border-slate-100'}`}>
                                    {/* Header Row */}
                                    <div className="p-4 flex items-start justify-between">
                                        <div className="flex items-center gap-3">
                                            <button 
                                                onClick={() => toggleExerciseCompletion(selectedPlanId, idx)}
                                                className={`transition-colors transform active:scale-90 duration-100 ${isDone ? 'text-red-500' : 'text-slate-300 hover:text-red-300'}`}
                                            >
                                                {isDone ? <CheckCircle2 className="w-6 h-6 fill-red-100" /> : <Circle className="w-6 h-6" />}
                                            </button>
                                            <div>
                                                <h4 className={`font-bold ${isDone ? 'text-red-900 line-through decoration-red-400' : 'text-slate-800'}`}>{ex.name}</h4>
                                                <div className="flex items-center gap-2 mt-1">
                                                     <p className="text-xs font-medium text-slate-500 bg-slate-100 inline-block px-1.5 py-0.5 rounded">
                                                        ç›®æ¨™: {ex.defaultSets} {isCardio ? '' : 'çµ„'} {isCardio ? '' : 'x'} {ex.defaultReps}
                                                    </p>
                                                    {isDone && (
                                                        <span className="text-[10px] font-bold text-orange-500 flex items-center gap-0.5">
                                                            <Flame className="w-3 h-3" /> {estimatedBurn} kcal
                                                        </span>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {/* Input Row */}
                                    <div className="px-4 pb-4 pl-12 flex gap-3">
                                        {/* Field 1: Weight or Duration */}
                                        <div className="flex-1 relative group">
                                            <input 
                                                type="number" 
                                                placeholder=""
                                                value={isCardio ? (logData.duration || '') : (logData.weight || '')}
                                                onChange={(e) => updateExerciseLog(selectedPlanId, idx, isCardio ? 'duration' : 'weight', e.target.value)}
                                                className="w-full bg-slate-50 border border-slate-200 rounded-lg py-2 pl-3 pr-8 text-sm font-bold text-slate-700 focus:ring-2 focus:ring-red-500 focus:bg-white outline-none transition-all"
                                            />
                                            <span className="absolute right-3 top-2 text-xs text-slate-400 font-bold group-focus-within:text-red-500 pointer-events-none flex items-center gap-1">
                                                {isCardio ? <Timer className="w-3 h-3"/> : <Scale className="w-3 h-3"/>}
                                                {isCardio ? 'min' : 'kg'}
                                            </span>
                                        </div>
                                        
                                        {/* Field 2: Reps or Distance */}
                                        <div className="flex-1 relative group">
                                            <input 
                                                type="number" 
                                                placeholder=""
                                                value={isCardio ? (logData.distance || '') : (logData.reps || '')}
                                                onChange={(e) => updateExerciseLog(selectedPlanId, idx, isCardio ? 'distance' : 'reps', e.target.value)}
                                                className="w-full bg-slate-50 border border-slate-200 rounded-lg py-2 pl-3 pr-8 text-sm font-bold text-slate-700 focus:ring-2 focus:ring-red-500 focus:bg-white outline-none transition-all"
                                            />
                                            <span className="absolute right-3 top-2 text-xs text-slate-400 font-bold group-focus-within:text-red-500 pointer-events-none flex items-center gap-1">
                                                {isCardio ? <Footprints className="w-3 h-3"/> : <Dumbbell className="w-3 h-3"/>}
                                                {isCardio ? 'km' : 'reps'}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    <div className="bg-slate-900 p-4 rounded-lg text-sm text-slate-300 flex gap-3 items-start border border-slate-800 shadow-lg">
                        <div className="mt-0.5 p-1 bg-red-600 rounded text-white"><Dumbbell className="w-3 h-3"/></div>
                        <div>
                            <p className="font-bold text-white mb-1">
                                {isCardio ? 'ğŸ”¥ æœ‰æ°§å°çŸ¥è­˜ (Cardio Tips)' : 'ğŸ’ª æ¼¸é€²å¼è² è· (Progressive Overload)'}
                            </p>
                            <p className="opacity-80 text-xs leading-relaxed">
                                {isCardio 
                                    ? 'æœ‰æ°§é‹å‹•èƒ½æœ‰æ•ˆæå‡å¿ƒè‚ºåŠŸèƒ½ä¸¦è¼”åŠ©ç‡ƒè„‚ã€‚å»ºè­°æ¯é€±é€²è¡Œ 150 åˆ†é˜ä¸­ç­‰å¼·åº¦æœ‰æ°§ã€‚è¨˜å¾—åœ¨é‡è¨“å¾Œé€²è¡Œæœ‰æ°§æ•ˆæœæ›´ä½³ï¼' 
                                    : 'ç´€éŒ„æ¯ä¸€æ¬¡çš„é‡é‡èˆ‡æ¬¡æ•¸ã€‚åªè¦æ¯”ä¸Šæ¬¡å¤šèˆ‰ 1kg æˆ–å¤šåš 1ä¸‹ï¼Œä½ å°±åœ¨è®Šå¼·ï¼'}
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        const HistorySection = ({ logs, deleteLog, editLog }) => {
            return (
                <div className="animate-fade-in pb-20">
                    <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <History className="w-6 h-6 text-red-600" />
                        æˆ°é¬¥æ­·ç¨‹
                    </h2>
                    <div className="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
                        <div className="overflow-x-auto">
                            <table className="w-full text-sm text-left">
                                <thead className="bg-slate-50 text-slate-600 font-bold border-b border-slate-200 uppercase tracking-wider text-xs">
                                    <tr>
                                        <th className="px-3 py-3 whitespace-nowrap">æ—¥æœŸ</th>
                                        <th className="px-2 py-3 whitespace-nowrap">é«”æ…‹</th>
                                        <th className="px-2 py-3 whitespace-nowrap">é£²é£Ÿ</th>
                                        <th className="px-2 py-3 whitespace-nowrap">è¡€å£“</th>
                                        <th className="px-3 py-3 text-right whitespace-nowrap">æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-100">
                                    {[...logs].reverse().map((log, idx) => (
                                        <tr key={idx} className="hover:bg-red-50/30 transition-colors">
                                            <td className="px-3 py-3 font-bold text-slate-700 whitespace-nowrap align-top">
                                                <div className="text-xs text-slate-400 font-normal">{log.date.split('-')[0]}</div>
                                                <div className="text-sm">{log.date.slice(5)}</div>
                                                
                                                {log.notes && (
                                                    <div className="mt-1 text-[10px] text-slate-400 font-normal flex gap-1 max-w-[80px] truncate">
                                                        <FileText className="w-3 h-3 min-w-[12px]" />
                                                        {log.notes}
                                                    </div>
                                                )}
                                            </td>
                                            <td className="px-2 py-3 align-top">
                                                <div className="font-bold text-slate-800">{log.weight} <span className="text-xs font-normal text-slate-500">kg</span></div>
                                                <div className="text-[10px] text-slate-500 leading-tight mt-0.5">
                                                    {log.bodyFat && <div>é«”è„‚ {log.bodyFat}%</div>}
                                                    {log.muscleMass && <div>è‚Œè‚‰ {log.muscleMass}</div>}
                                                </div>
                                            </td>
                                            <td className="px-2 py-3 align-top">
                                                <div className="text-orange-600 font-bold">{log.calories || '-'} <span className="text-[10px] font-normal text-orange-400">kcal</span></div>
                                                <div className="text-[10px] text-slate-500 mt-0.5">{log.protein ? `P: ${log.protein}g` : ''}</div>
                                                {log.burnedCalories > 0 && (
                                                    <div className="text-[10px] text-red-500 font-bold mt-1 flex items-center gap-0.5">
                                                        <Flame className="w-2.5 h-2.5" /> -{log.burnedCalories}
                                                    </div>
                                                )}
                                            </td>
                                            <td className="px-2 py-3 align-top">
                                                {log.systolic && log.diastolic ? (
                                                    <div className="text-xs font-bold text-slate-700">
                                                        {log.systolic}/{log.diastolic}
                                                        <div className="text-[10px] text-slate-400 font-normal">mmHg</div>
                                                    </div>
                                                ) : (
                                                    <span className="text-slate-300">-</span>
                                                )}
                                            </td>
                                            <td className="px-2 py-3 text-right align-top">
                                                <div className="flex flex-col gap-2 items-end">
                                                    <button 
                                                        onClick={() => editLog(log.date)}
                                                        className="bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors px-2 py-1 rounded text-xs font-bold flex items-center justify-center gap-1 w-[60px]"
                                                    >
                                                        <Edit className="w-3 h-3" /> ä¿®æ”¹
                                                    </button>
                                                    <button 
                                                        onClick={() => deleteLog(log.date)}
                                                        className="text-red-400 hover:text-red-600 transition-colors p-1"
                                                    >
                                                        <Trash2 className="w-4 h-4" />
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    ))}
                                    {logs.length === 0 && (
                                        <tr>
                                            <td colSpan="5" className="p-8 text-center text-slate-400 font-medium">
                                                å°šç„¡ç´€éŒ„ï¼Œä»Šå¤©å°±æ˜¯æ”¹è®Šçš„é–‹å§‹ï¼
                                            </td>
                                        </tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };

        const SettingsSection = ({ userProfile, setUserProfile }) => {
            return (
                <div className="animate-fade-in pb-20">
                    <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <Settings className="w-6 h-6 text-red-600" />
                        å€‹äººæª”æ¡ˆèˆ‡ç›®æ¨™
                    </h2>
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100 space-y-6">
                        {/* Personal Details */}
                        <div className="space-y-4">
                            <h3 className="text-sm font-black text-slate-800 uppercase tracking-wider border-b border-slate-100 pb-2 flex items-center gap-2">
                                <Activity className="w-4 h-4 text-slate-400" />
                                åŸºæœ¬è³‡æ–™ (ç”¨æ–¼è¨ˆç®—ä»£è¬)
                            </h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">èº«é«˜ (cm)</label>
                                    <input 
                                        type="number" 
                                        value={userProfile.height}
                                        onChange={(e) => setUserProfile({...userProfile, height: parseFloat(e.target.value)})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none font-medium"
                                    />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">å¹´é½¡</label>
                                    <input 
                                        type="number" 
                                        value={userProfile.age}
                                        onChange={(e) => setUserProfile({...userProfile, age: parseFloat(e.target.value)})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none font-medium"
                                    />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">æ€§åˆ¥</label>
                                    <select 
                                        value={userProfile.gender}
                                        onChange={(e) => setUserProfile({...userProfile, gender: e.target.value})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none bg-white font-medium"
                                    >
                                        <option value="male">ç”·</option>
                                        <option value="female">å¥³</option>
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">æ—¥å¸¸æ´»å‹•é‡</label>
                                    <select 
                                        value={userProfile.activityLevel}
                                        onChange={(e) => setUserProfile({...userProfile, activityLevel: parseFloat(e.target.value)})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none bg-white text-sm font-medium"
                                    >
                                        <option value="1.2">ä¹…å (æ²’é‹å‹•)</option>
                                        <option value="1.375">è¼•åº¦ (æ¯é€±1-3æ¬¡)</option>
                                        <option value="1.55">ä¸­åº¦ (æ¯é€±3-5æ¬¡)</option>
                                        <option value="1.725">é«˜åº¦ (æ¯é€±6-7æ¬¡)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        {/* Targets */}
                        <div className="space-y-4 pt-2">
                            <h3 className="text-sm font-black text-slate-800 uppercase tracking-wider border-b border-slate-100 pb-2 flex items-center gap-2">
                                <Trophy className="w-4 h-4 text-slate-400" />
                                æ¸›é‡ç›®æ¨™
                            </h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">èµ·å§‹é«”é‡ (kg)</label>
                                    <input 
                                        type="number" 
                                        value={userProfile.startWeight}
                                        onChange={(e) => setUserProfile({...userProfile, startWeight: parseFloat(e.target.value)})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none font-medium"
                                    />
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">ç›®æ¨™é«”é‡ (kg)</label>
                                    <input 
                                        type="number" 
                                        value={userProfile.targetWeight}
                                        onChange={(e) => setUserProfile({...userProfile, targetWeight: parseFloat(e.target.value)})}
                                        className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none font-medium"
                                    />
                                </div>
                            </div>
                            <div>
                                <label className="block text-xs font-bold text-slate-500 mb-1">ç›®æ¨™é”æˆæ—¥æœŸ</label>
                                <input 
                                    type="date" 
                                    value={userProfile.targetDate}
                                    onChange={(e) => setUserProfile({...userProfile, targetDate: e.target.value})}
                                    className="w-full border border-slate-200 rounded-lg p-2.5 focus:ring-2 focus:ring-red-500 outline-none font-medium"
                                />
                            </div>
                        </div>

                        <div className="pt-4 border-t border-slate-100 bg-slate-50 p-4 rounded text-xs text-slate-500 leading-relaxed">
                            * ç³»çµ±æœƒæ ¹æ“šä½ çš„èº«é«˜ã€é«”é‡ã€å¹´é½¡èˆ‡æ´»å‹•é‡è‡ªå‹•è¨ˆç®— TDEE èˆ‡å»ºè­°ç†±é‡ã€‚
                            <br/>
                            * è³‡æ–™åƒ…å„²å­˜æ–¼æ­¤è£ç½®ç€è¦½å™¨ä¸­ (LocalStorage)ã€‚
                        </div>
                    </div>
                </div>
            );
        };

        function FitTrackApp() {
            const [activeTab, setActiveTab] = useState('dashboard');
            
            const getStoredItem = (key, defaultValue) => {
                try {
                    const saved = localStorage.getItem(key);
                    return saved ? JSON.parse(saved) : defaultValue;
                } catch (e) {
                    console.warn('LocalStorage access failed:', e);
                    return defaultValue;
                }
            };

            const setStoredItem = (key, value) => {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                } catch (e) {
                    console.warn('LocalStorage write failed:', e);
                }
            };

            const [userProfile, setUserProfile] = useState(() => getStoredItem('fitTrack_profile', {
                startWeight: 60,
                targetWeight: 55,
                targetDate: '2026-12-31',
                height: 175,
                age: 30,
                gender: 'male',
                activityLevel: 1.375,
            }));

            const [logs, setLogs] = useState(() => getStoredItem('fitTrack_logs', [
                { date: '2026-01-01', weight: 60, bodyFat: 25, muscleMass: 35, visceralFat: 8, calories: 2500, protein: 120, notes: 'æ–°å¹´æ–°å¸Œæœ›ï¼Œé–‹å§‹æ¸›è„‚ï¼' },
            ]));

            const [workoutLogs, setWorkoutLogs] = useState(() => getStoredItem('fitTrack_workouts_v2', {}));

            // ä½¿ç”¨æœ¬åœ°æ™‚é–“ (Taiwan/Asia) ä¾†åˆå§‹åŒ– "ä»Šå¤©"ï¼Œé¿å…æ™‚å€å•é¡Œå°è‡´æ—¥æœŸè·³å›æ˜¨å¤©
            const getTodayStr = () => {
                const now = new Date();
                // ç°¡å–®è™•ç†ï¼šç”¨æœ¬åœ°æ™‚é–“çš„ YYYY-MM-DD
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            };

            const todayStr = useMemo(() => getTodayStr(), []);
            const [currentDate, setCurrentDate] = useState(todayStr);
            
            const [todayInput, setTodayInput] = useState({
                weight: '',
                bodyFat: '',
                muscleMass: '',
                visceralFat: '',
                calories: '',
                protein: '',
                notes: '',
                burnedCalories: '',
                systolic: '',
                diastolic: '',
                pulse: ''
            });

            // Calculate daily burn whenever workoutLogs or currentDate changes
            useEffect(() => {
                const logsForDate = workoutLogs[currentDate];
                let dailyBurn = 0;
                if (logsForDate) {
                    Object.keys(logsForDate).forEach(planId => {
                        const plan = DEFAULT_WORKOUTS.find(p => p.id === planId);
                        if (plan) {
                            plan.exercises.forEach((ex, idx) => {
                                const log = logsForDate[planId][idx];
                                if (log && log.completed) {
                                    let val = 0;
                                    if (plan.type === 'cardio') {
                                        val = parseFloat(log.duration) || 0;
                                    } else {
                                        val = ex.defaultSets; 
                                    }
                                    dailyBurn += val * (ex.calFactor || 0);
                                }
                            });
                        }
                    });
                }
                
                // Update todayInput to reflect the calculated burn
                setTodayInput(prev => ({ ...prev, burnedCalories: dailyBurn.toString() }));
                
                // Also update the main log if it exists, to keep history in sync
                setLogs(prevLogs => {
                    const idx = prevLogs.findIndex(l => l.date === currentDate);
                    if (idx >= 0) {
                        const newLogs = [...prevLogs];
                        newLogs[idx] = { ...newLogs[idx], burnedCalories: dailyBurn };
                        return newLogs;
                    }
                    return prevLogs;
                });

            }, [workoutLogs, currentDate]);


            useEffect(() => {
                const existingLog = logs.find(l => l.date === currentDate);
                if (existingLog) {
                    setTodayInput(prev => ({
                        ...prev,
                        weight: existingLog.weight || '',
                        bodyFat: existingLog.bodyFat || '',
                        muscleMass: existingLog.muscleMass || '',
                        visceralFat: existingLog.visceralFat || '',
                        calories: existingLog.calories || '',
                        protein: existingLog.protein || '',
                        notes: existingLog.notes || '',
                        systolic: existingLog.systolic || '',
                        diastolic: existingLog.diastolic || '',
                        pulse: existingLog.pulse || ''
                        // burnedCalories is handled by the other useEffect
                    }));
                } else {
                    setTodayInput(prev => ({
                        ...prev,
                        weight: '',
                        bodyFat: '',
                        muscleMass: '',
                        visceralFat: '',
                        calories: '',
                        protein: '',
                        notes: '',
                        systolic: '',
                        diastolic: '',
                        pulse: ''
                    }));
                }
            }, [currentDate, logs]); // Added logs to dependency to refresh if logs change elsewhere

            const [selectedPlanId, setSelectedPlanId] = useState('push');
            const [saveMessage, setSaveMessage] = useState('');

            useEffect(() => {
                setStoredItem('fitTrack_profile', userProfile);
            }, [userProfile]);

            useEffect(() => {
                setStoredItem('fitTrack_logs', logs);
            }, [logs]);

            useEffect(() => {
                setStoredItem('fitTrack_workouts_v2', workoutLogs);
            }, [workoutLogs]);

            // --- æ ¸å¿ƒé‚è¼¯æ›´æ–°ï¼šæ ¹æ“šé¸æ“‡çš„æ—¥æœŸè¨ˆç®—ç•¶ä¸‹æ‡‰é¡¯ç¤ºçš„æ•¸æ“š ---
            const getEffectiveStat = (field, fallback = 0) => {
                // 1. å¦‚æœä½¿ç”¨è€…æ­£åœ¨è¼¸å…¥ï¼Œå„ªå…ˆé¡¯ç¤ºè¼¸å…¥ä¸­çš„æ•¸å€¼ (Live Preview)
                if (todayInput[field] && todayInput[field] !== '') {
                    const val = parseFloat(todayInput[field]);
                    if (!isNaN(val)) return val;
                }
                
                // 2. å¦å‰‡ï¼Œæ‰¾å‡ºã€Œå°æ–¼ç­‰æ–¼ç›®å‰é¸æ“‡æ—¥æœŸã€çš„æœ€æ–°ä¸€ç­†ç´€éŒ„
                const validLogs = logs.filter(l => l.date <= currentDate && l[field] !== undefined && l[field] !== null && l[field] !== '');
                
                if (validLogs.length > 0) {
                    return validLogs[validLogs.length - 1][field];
                }

                // 3. éƒ½æ²’æœ‰å‰‡å›å‚³é è¨­å€¼
                return fallback;
            };

            const currentWeight = useMemo(() => getEffectiveStat('weight', userProfile.startWeight), [todayInput.weight, logs, currentDate, userProfile.startWeight]);
            const currentBodyFat = useMemo(() => getEffectiveStat('bodyFat', 0), [todayInput.bodyFat, logs, currentDate]);
            const currentMuscleMass = useMemo(() => getEffectiveStat('muscleMass', 0), [todayInput.muscleMass, logs, currentDate]);
            const currentVisceralFat = useMemo(() => getEffectiveStat('visceralFat', 0), [todayInput.visceralFat, logs, currentDate]);
            
            const bmi = (currentWeight / Math.pow(userProfile.height / 100, 2)).toFixed(1);
            
            const calculateTDEE = () => {
                let bmr = 10 * currentWeight + 6.25 * userProfile.height - 5 * userProfile.age;
                bmr += userProfile.gender === 'male' ? 5 : -161;
                return Math.round(bmr * userProfile.activityLevel);
            };
            const tdee = calculateTDEE();
            const recommendedCalories = Math.round(tdee * 0.85); // 15% Deficit
            const recommendedProtein = Math.round(currentWeight * 2.0); // High protein for cutting

            const daysLeft = useMemo(() => {
                const target = new Date(userProfile.targetDate);
                const today = new Date();
                const diffTime = target - today;
                if (diffTime < 0) return 0;
                return Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
            }, [userProfile.targetDate]);

            const handleLogSubmit = (e) => {
                e.preventDefault();
                // removed !todayInput.weight check to allow saving other data independently
                
                // ç¢ºä¿æ•¸å€¼æ˜¯å­—ä¸²ï¼Œä»¥ä¾¿å„²å­˜
                const newLog = {
                    date: currentDate,
                    weight: todayInput.weight ? parseFloat(todayInput.weight) : undefined,
                    bodyFat: todayInput.bodyFat ? parseFloat(todayInput.bodyFat) : null,
                    muscleMass: todayInput.muscleMass ? parseFloat(todayInput.muscleMass) : null,
                    visceralFat: todayInput.visceralFat ? parseFloat(todayInput.visceralFat) : null,
                    calories: todayInput.calories ? parseFloat(todayInput.calories) : null,
                    protein: todayInput.protein ? parseFloat(todayInput.protein) : null,
                    notes: todayInput.notes,
                    burnedCalories: todayInput.burnedCalories ? parseFloat(todayInput.burnedCalories) : 0,
                    systolic: todayInput.systolic ? parseInt(todayInput.systolic) : null,
                    diastolic: todayInput.diastolic ? parseInt(todayInput.diastolic) : null,
                    pulse: todayInput.pulse ? parseInt(todayInput.pulse) : null,
                };

                // åˆä½µç¾æœ‰è³‡æ–™ï¼ˆé¿å…åœ¨ä¸åŒé é¢å„²å­˜æ™‚è¦†è“‹æ‰å¦ä¸€é çš„è³‡æ–™ï¼‰
                const existingIndex = logs.findIndex(l => l.date === currentDate);
                let newLogs;
                
                if (existingIndex >= 0) {
                    newLogs = [...logs];
                    // åªæ›´æ–°æœ‰å€¼çš„æ¬„ä½ï¼Œä¿ç•™åŸæœ‰çš„
                    const currentLog = newLogs[existingIndex];
                    newLogs[existingIndex] = {
                        ...currentLog,
                        ...Object.fromEntries(Object.entries(newLog).filter(([_, v]) => v !== undefined && v !== null && v !== ''))
                    };
                    
                    // Specific logic for different sections
                    if (activeTab === 'diet') {
                        newLogs[existingIndex].calories = newLog.calories || currentLog.calories;
                        newLogs[existingIndex].protein = newLog.protein || currentLog.protein;
                        newLogs[existingIndex].notes = newLog.notes || currentLog.notes;
                    } else if (activeTab === 'dashboard') {
                        newLogs[existingIndex].weight = newLog.weight;
                        newLogs[existingIndex].bodyFat = newLog.bodyFat;
                        newLogs[existingIndex].muscleMass = newLog.muscleMass;
                        newLogs[existingIndex].visceralFat = newLog.visceralFat;
                    } else if (activeTab === 'pressure') {
                        newLogs[existingIndex].systolic = newLog.systolic;
                        newLogs[existingIndex].diastolic = newLog.diastolic;
                        newLogs[existingIndex].pulse = newLog.pulse;
                    }

                    // Always update burned calories from state which is synced with workout logs
                    newLogs[existingIndex].burnedCalories = newLog.burnedCalories;

                } else {
                    newLogs = [...logs, newLog];
                    newLogs.sort((a, b) => new Date(a.date) - new Date(b.date));
                }
                
                setLogs(newLogs);
                setSaveMessage('ç´€éŒ„å·²æ›´æ–°ï¼Keep Grinding!');
                setTimeout(() => setSaveMessage(''), 3000);
            };

            const handleEditLog = (date) => {
                setCurrentDate(date);
                setActiveTab('dashboard');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const updateExerciseLog = (planId, exerciseIndex, field, value) => {
                const currentDayLogs = workoutLogs[currentDate] || {};
                const currentPlanLogs = currentDayLogs[planId] || {};
                const currentExerciseLog = currentPlanLogs[exerciseIndex] || { completed: false };

                const updatedExerciseLog = { ...currentExerciseLog, [field]: value };
                
                if (value !== '') {
                    updatedExerciseLog.completed = true;
                }

                setWorkoutLogs({
                    ...workoutLogs,
                    [currentDate]: {
                        ...currentDayLogs,
                        [planId]: {
                            ...currentPlanLogs,
                            [exerciseIndex]: updatedExerciseLog
                        }
                    }
                });
            };

            const toggleExerciseCompletion = (planId, exerciseIndex) => {
                const currentStatus = workoutLogs[currentDate]?.[planId]?.[exerciseIndex]?.completed || false;
                updateExerciseLog(planId, exerciseIndex, 'completed', !currentStatus);
            };

            const deleteLog = (date) => {
                if (confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†ç´€éŒ„å—ï¼Ÿ')) {
                    setLogs(logs.filter(l => l.date !== date));
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 pb-24 md:pb-0">
                    
                    {/* Header */}
                    <header className="bg-gradient-to-r from-red-800 via-red-600 to-orange-500 shadow-lg sticky top-0 z-30">
                        <div className="max-w-3xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <div className="bg-white/20 p-2 rounded-lg backdrop-blur-sm">
                                    <Scale className="w-5 h-5 text-white" />
                                </div>
                                <div>
                                    <h1 className="text-xl font-black text-white leading-tight italic tracking-wide">
                                    FitTrack 2026
                                    </h1>
                                    <p className="text-[10px] text-rose-100 font-bold tracking-widest opacity-80">BE STRONGER</p>
                                </div>
                            </div>
                            <div className="text-right text-white">
                                <div className="text-xs font-bold opacity-90">
                                    {new Date().toLocaleDateString('zh-TW', { month: 'long', day: 'numeric' })}
                                </div>
                                <div className="text-[10px] opacity-70">
                                    {new Date().toLocaleDateString('zh-TW', { weekday: 'long' })}
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content Area */}
                    <main className="max-w-3xl mx-auto px-4 py-6">
                        {activeTab === 'dashboard' && (
                            <Dashboard 
                                todayInput={todayInput} 
                                setTodayInput={setTodayInput}
                                handleLogSubmit={handleLogSubmit}
                                saveMessage={saveMessage}
                                currentWeight={currentWeight}
                                bmi={bmi}
                                tdee={tdee}
                                recommendedCalories={recommendedCalories}
                                daysLeft={daysLeft}
                                currentDate={currentDate} // Pass for input value
                                setCurrentDate={setCurrentDate} // Pass setter
                                recommendedProtein={recommendedProtein}
                                logs={logs}
                                currentBodyFat={currentBodyFat}
                                currentMuscleMass={currentMuscleMass}
                                currentVisceralFat={currentVisceralFat}
                                todayStr={todayStr}
                                targetWeight={userProfile.targetWeight}
                            />
                        )}
                        {activeTab === 'diet' && (
                            <DietSection 
                                todayInput={todayInput} 
                                setTodayInput={setTodayInput}
                                handleLogSubmit={handleLogSubmit}
                                saveMessage={saveMessage}
                                recommendedCalories={recommendedCalories}
                                recommendedProtein={recommendedProtein}
                                currentDate={currentDate}
                                setCurrentDate={setCurrentDate}
                                todayStr={todayStr}
                            />
                        )}
                        {activeTab === 'workout' && (
                            <WorkoutSection 
                                selectedPlanId={selectedPlanId}
                                setSelectedPlanId={setSelectedPlanId}
                                workoutLogs={workoutLogs}
                                updateExerciseLog={updateExerciseLog}
                                toggleExerciseCompletion={toggleExerciseCompletion}
                                todayStr={currentDate} // Use selected date for workouts too
                                currentDate={currentDate}
                                setCurrentDate={setCurrentDate}
                            />
                        )}
                        {activeTab === 'pressure' && (
                            <BloodPressureSection 
                                todayInput={todayInput}
                                setTodayInput={setTodayInput}
                                handleLogSubmit={handleLogSubmit}
                                saveMessage={saveMessage}
                                logs={logs}
                                currentDate={currentDate}
                                setCurrentDate={setCurrentDate}
                                todayStr={todayStr}
                            />
                        )}
                        {activeTab === 'history' && (
                            <HistorySection 
                                logs={logs}
                                deleteLog={deleteLog}
                                editLog={handleEditLog}
                            />
                        )}
                        {activeTab === 'settings' && (
                            <SettingsSection 
                                userProfile={userProfile}
                                setUserProfile={setUserProfile}
                            />
                        )}
                    </main>

                    {/* Mobile Navigation Bar (Fixed Bottom) */}
                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 safe-area-pb z-20 md:hidden shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                        <div className="flex justify-around items-center h-16">
                            <button 
                                onClick={() => setActiveTab('dashboard')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'dashboard' ? 'text-red-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <LayoutDashboard className="w-5 h-5" />
                                <span className="text-[10px] font-bold">ç¸½è¦½</span>
                            </button>
                            <button 
                                onClick={() => setActiveTab('diet')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'diet' ? 'text-red-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Utensils className="w-5 h-5" />
                                <span className="text-[10px] font-bold">é£²é£Ÿ</span>
                            </button>
                            <button 
                                onClick={() => setActiveTab('workout')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'workout' ? 'text-red-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Dumbbell className="w-5 h-5" />
                                <span className="text-[10px] font-bold">é‹å‹•</span>
                            </button>
                            <button 
                                onClick={() => setActiveTab('pressure')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'pressure' ? 'text-red-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <HeartPulse className="w-5 h-5" />
                                <span className="text-[10px] font-bold">è¡€å£“</span>
                            </button>
                            <button 
                                onClick={() => setActiveTab('history')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'history' ? 'text-red-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <History className="w-5 h-5" />
                                <span className="text-[10px] font-bold">ç´€éŒ„</span>
                            </button>
                            <button 
                                onClick={() => setActiveTab('settings')}
                                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors ${activeTab === 'settings' ? 'text-red-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Settings className="w-5 h-5" />
                                <span className="text-[10px] font-bold">è¨­å®š</span>
                            </button>
                        </div>
                    </nav>
                    
                    {/* Desktop Helper */}
                    <div className="hidden md:block fixed right-8 bottom-8">
                        <div className="bg-slate-900 p-4 rounded-lg shadow-xl border border-slate-800 max-w-xs text-white">
                            <p className="text-sm font-bold text-rose-400 mb-1">ğŸ’¡ NO PAIN, NO GAIN</p>
                            <p className="text-xs text-slate-300">æ˜¨å¤©çš„ä½ å·²ç¶“éå»ï¼Œä»Šå¤©çš„ä½ æ­£åœ¨è®Šå¼·ã€‚å …æŒä¸‹å»ï¼</p>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the App
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FitTrackApp />);
    </script>
</body>
</html>
